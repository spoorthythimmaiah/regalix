{"version":3,"sources":["webpack:///./sharedemos/static/js/homepage_banner/models/homepage_banner.js","webpack:///./sharedemos/static/js/homepage_banner/templates/create_form.handlebars","webpack:///./sharedemos/static/js/homepage_banner/templates/cta.handlebars","webpack:///./sharedemos/static/js/homepage_banner/views/edit.js"],"names":["define","Backbone","HomepageBanner","Model","extend","urlRoot","_","$","Common","createForm","CtaTemplate","editView","View","el","events","actionFailed","target","setTimeout","removeClass","addClass","actionSuccess","closeForm","actionInProgress","addCTA","event","removeCustomErrorMessage","ctaUrl","validateUrl","val","customErrorMessage","ctaText","ctaData","link","name","cta_id","append","popupName","hide","message","elem","editToolTip","after","focus","edit","banner","fetch","success","modle","response","showForm","error","console","log","removeCTA","parent","currentTarget","attr","remove","show","removeMedia","fileNameClass","parentClass","isBannerIcon","hasClass","hasAttribute","find","empty","siblings","removeAttr","submitDetails","preventDefault","currentFormName","formName","bannerTitle","bgImageFile","match","saveDetails","bannerData","FormData","bannerDescription","ctaDetails","ctaItems","each","ele","index","action","data","id","cta","title","options","type","text","href","push","JSON","stringify","files","banner_id","root","save","processData","cache","contentType","includes","attributes","status","xhr","responseText","is_edit","imageAdded","checked","background_image","path","document","cdn_url","$el","html","css","updateCTAUrl","altKey","indexOf","keyCode","value","length","validateMedia","validStatus","media","split","fileSizeMB","size","test","VIDEO_FILE_MAX_SIZE","URL","createObjectURL"],"mappings":"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","file":"28.4df9e8.js","sourcesContent":["/*global define */\ndefine([\n    'backbone'\n], function (Backbone) {\n    'use strict';\n\n    var HomepageBanner = Backbone.Model.extend({\n        urlRoot: \"/api/homepage-banner\"\n    });\n\n    return HomepageBanner;\n});","var Handlebars = require(\"/docker/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    return \"            \"\n    + container.escapeExpression(__default(require(\"/docker/sharedemos/static/js/helpers/handlebars/i18n.js\")).call(depth0 != null ? depth0 : (container.nullContext || {}),\"edit\",{\"name\":\"i18n\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":12},\"end\":{\"line\":4,\"column\":27}}}))\n    + \"\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    return \"            \"\n    + container.escapeExpression(__default(require(\"/docker/sharedemos/static/js/helpers/handlebars/i18n.js\")).call(depth0 != null ? depth0 : (container.nullContext || {}),\"add\",{\"name\":\"i18n\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":12},\"end\":{\"line\":6,\"column\":26}}}))\n    + \"\\n\";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    var lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \" value=\\\"\"\n    + container.escapeExpression(container.lambda((depth0 != null ? lookupProperty(depth0,\"title\") : depth0), depth0))\n    + \"\\\" \";\n},\"7\":function(container,depth0,helpers,partials,data) {\n    return \"image-added\";\n},\"9\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return container.escapeExpression(container.lambda(((stack1 = (depth0 != null ? lookupProperty(depth0,\"background_image\") : depth0)) != null ? lookupProperty(stack1,\"name\") : stack1), depth0));\n},\"11\":function(container,depth0,helpers,partials,data) {\n    return \"resource-added\";\n},\"13\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = __default(require(\"/docker/sharedemos/static/js/helpers/handlebars/compare.js\")).call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,\"resource\") : depth0)) != null ? lookupProperty(stack1,\"type\") : stack1),\"==\",\"wistia\",{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(14, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":49,\"column\":24},\"end\":{\"line\":59,\"column\":36}}})) != null ? stack1 : \"\")\n    + ((stack1 = __default(require(\"/docker/sharedemos/static/js/helpers/handlebars/compare.js\")).call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,\"resource\") : depth0)) != null ? lookupProperty(stack1,\"type\") : stack1),\"==\",\"image\",{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(19, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":60,\"column\":24},\"end\":{\"line\":64,\"column\":36}}})) != null ? stack1 : \"\");\n},\"14\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = ((stack1 = (depth0 != null ? lookupProperty(depth0,\"resource\") : depth0)) != null ? lookupProperty(stack1,\"meta_data\") : stack1)) != null ? lookupProperty(stack1,\"thumbnail_url\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(15, data, 0),\"inverse\":container.program(17, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":50,\"column\":28},\"end\":{\"line\":58,\"column\":35}}})) != null ? stack1 : \"\");\n},\"15\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"                                <img class=\\\"drag\\\" id=\\\"upload-resource-preview\\\"\\n                                     src=\\\"\"\n    + container.escapeExpression(container.lambda(((stack1 = ((stack1 = (depth0 != null ? lookupProperty(depth0,\"resource\") : depth0)) != null ? lookupProperty(stack1,\"meta_data\") : stack1)) != null ? lookupProperty(stack1,\"thumbnail_url\") : stack1), depth0))\n    + \"\\\"\\n                                     alt=\\\"banner-resource\\\">\\n\";\n},\"17\":function(container,depth0,helpers,partials,data) {\n    return \"                                <img class=\\\"drag\\\" id=\\\"upload-resource-preview\\\"\\n                                     src=\\\"/static/images/author/img-icon.png\\\"\\n                                     alt=\\\"banner-resource\\\">\\n\";\n},\"19\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"                            <img class=\\\"drag\\\" id=\\\"upload-resource-preview\\\"\\n                                 src=\\\"/static/media/\"\n    + container.escapeExpression(container.lambda(((stack1 = (depth0 != null ? lookupProperty(depth0,\"resource\") : depth0)) != null ? lookupProperty(stack1,\"path\") : stack1), depth0))\n    + \"\\\"\\n                                 alt=\\\"banner-resource\\\">\\n\";\n},\"21\":function(container,depth0,helpers,partials,data) {\n    return \"                        <img class=\\\"drag\\\" id=\\\"upload-resource-preview\\\"\\n                             src=\\\"/static/images/author/img-icon.png\\\"\\n                             alt=\\\"banner-resource\\\">\\n\";\n},\"23\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return container.escapeExpression(container.lambda(((stack1 = (depth0 != null ? lookupProperty(depth0,\"resource\") : depth0)) != null ? lookupProperty(stack1,\"name\") : stack1), depth0));\n},\"25\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = container.invokePartial(require(\"/docker/sharedemos/static/js/homepage_banner/templates/cta.handlebars\"),depth0,{\"name\":\"cta\",\"data\":data,\"indent\":\"                        \",\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\");\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.escapeExpression, alias3=container.lambda, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"popup-box homepage-banner\\\">\\n    <div class=\\\"popup-title\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"is_edit\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.program(3, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":8},\"end\":{\"line\":7,\"column\":15}}})) != null ? stack1 : \"\")\n    + \"        \"\n    + alias2(__default(require(\"/docker/sharedemos/static/js/helpers/handlebars/i18n.js\")).call(alias1,\"homepage banner\",{\"name\":\"i18n\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":8},\"end\":{\"line\":8,\"column\":34}}}))\n    + \"\\n    </div>\\n    <form name=\\\"homepage-banner\\\" class=\\\"homepage-banner\\\"\\n          enctype=\\\"multipart/form-data\\\"\\n          data-id=\\\"\"\n    + alias2(alias3((depth0 != null ? lookupProperty(depth0,\"banner_id\") : depth0), depth0))\n    + \"\\\">\\n        <div class=\\\"popup-info\\\">\\n            <div>\\n                <label>\\n                    <span>banner title</span>\\n                    <input type=\\\"text\\\" class=\\\"trim-input\\\" name=\\\"banner-title\\\"\\n                           id=\\\"banner-text\\\" placeholder=\\\"Name\\\"\\n                           \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"title\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":19,\"column\":27},\"end\":{\"line\":19,\"column\":67}}})) != null ? stack1 : \"\")\n    + \">\\n                </label>\\n            </div>\\n            <div>\\n                <label>\\n                    <span>banner description</span>\\n                    <textarea class=\\\"trim-input\\\" name=\\\"banner-description\\\" placeholder=\\\"Description\\\">\"\n    + alias2(alias3((depth0 != null ? lookupProperty(depth0,\"description\") : depth0), depth0))\n    + \"</textarea>\\n                </label>\\n            </div>\\n            <div class=\\\"media-container row\\\">\\n                <div class=\\\"block  col-xs-12 col-sm-6 col-md-6 banner-image \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"imageAdded\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(7, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":29,\"column\":76},\"end\":{\"line\":29,\"column\":112}}})) != null ? stack1 : \"\")\n    + \"\\\">\\n                    <div class=\\\"title banner\\\">\"\n    + alias2(__default(require(\"/docker/sharedemos/static/js/helpers/handlebars/i18n.js\")).call(alias1,\"upload a banner image\",{\"name\":\"i18n\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":30,\"column\":46},\"end\":{\"line\":30,\"column\":78}}}))\n    + \"</div>\\n                    <div class=\\\"sub-title banner-image-sub-title\\\">\"\n    + alias2(__default(require(\"/docker/sharedemos/static/js/helpers/handlebars/i18n.js\")).call(alias1,\"upload an image for the banner\",{\"name\":\"i18n\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":31,\"column\":66},\"end\":{\"line\":31,\"column\":107}}}))\n    + \".</div>\\n                    <input type=\\\"file\\\" class=\\\"drag-file\\\" id=\\\"upload-banner-image\\\" accept=\\\"image/*\\\" name=\\\"background-image\\\" >\\n                    <img class=\\\"drag\\\" id=\\\"banner-image-preview\\\"\\n                    src=\\\"\"\n    + alias2(alias3(((stack1 = (depth0 != null ? lookupProperty(depth0,\"background_image\") : depth0)) != null ? lookupProperty(stack1,\"path\") : stack1), depth0))\n    + \"\\\"\\n                    alt=\\\"\"\n    + alias2(alias3(((stack1 = (depth0 != null ? lookupProperty(depth0,\"background_image\") : depth0)) != null ? lookupProperty(stack1,\"name\") : stack1), depth0))\n    + \"\\\" />\\n                    <div class=\\\"file-name\\\">\\n                        \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"imageAdded\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(9, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":37,\"column\":24},\"end\":{\"line\":37,\"column\":74}}})) != null ? stack1 : \"\")\n    + \"\\n                    </div>\\n                    <label id=\\\"remove-img\\\" \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"background_image\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(7, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":39,\"column\":43},\"end\":{\"line\":39,\"column\":85}}})) != null ? stack1 : \"\")\n    + \">\\n                       \"\n    + alias2(__default(require(\"/docker/sharedemos/static/js/helpers/handlebars/i18n.js\")).call(alias1,\"remove\",{\"name\":\"i18n\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":40,\"column\":23},\"end\":{\"line\":40,\"column\":40}}}))\n    + \"</label>\\n                    <label for=\\\"upload-banner-image\\\" class=\\\"rippleEffect\\\">\"\n    + alias2(__default(require(\"/docker/sharedemos/static/js/helpers/handlebars/i18n.js\")).call(alias1,\"browse\",{\"name\":\"i18n\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":41,\"column\":74},\"end\":{\"line\":41,\"column\":91}}}))\n    + \"</label>\\n                </div>\\n\\n                <div class=\\\"block col-xs-12 col-sm-6 col-md-6 banner-resource \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"resource\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(11, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":44,\"column\":78},\"end\":{\"line\":44,\"column\":115}}})) != null ? stack1 : \"\")\n    + \"\\\">\\n                    <div class=\\\"title banner\\\">\"\n    + alias2(__default(require(\"/docker/sharedemos/static/js/helpers/handlebars/i18n.js\")).call(alias1,\"upload media\",{\"name\":\"i18n\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":45,\"column\":46},\"end\":{\"line\":45,\"column\":69}}}))\n    + \"</div>\\n                    <div class=\\\"sub-title\\\">\"\n    + alias2(__default(require(\"/docker/sharedemos/static/js/helpers/handlebars/i18n.js\")).call(alias1,\"upload an image/video to go with this banner\",{\"name\":\"i18n\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":46,\"column\":43},\"end\":{\"line\":46,\"column\":98}}}))\n    + \".</div>\\n                    <input type=\\\"file\\\" class=\\\"drag-file\\\" id=\\\"upload-banner-resource\\\" accept=\\\"image/*,video/*\\\" name=\\\"banner-resource\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"resource\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(13, data, 0),\"inverse\":container.program(21, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":48,\"column\":20},\"end\":{\"line\":69,\"column\":27}}})) != null ? stack1 : \"\")\n    + \"                    <div class=\\\"resource-name\\\">\\n                        \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"resource\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(23, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":71,\"column\":24},\"end\":{\"line\":71,\"column\":64}}})) != null ? stack1 : \"\")\n    + \"\\n                    </div>\\n                    <label id=\\\"remove-resource\\\" \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"resource\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(11, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":73,\"column\":48},\"end\":{\"line\":73,\"column\":85}}})) != null ? stack1 : \"\")\n    + \" >\"\n    + alias2(__default(require(\"/docker/sharedemos/static/js/helpers/handlebars/i18n.js\")).call(alias1,\"remove\",{\"name\":\"i18n\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":73,\"column\":87},\"end\":{\"line\":73,\"column\":104}}}))\n    + \"\\n                    </label>\\n                    <label for=\\\"upload-banner-resource\\\" class=\\\"rippleEffect\\\">\"\n    + alias2(__default(require(\"/docker/sharedemos/static/js/helpers/handlebars/i18n.js\")).call(alias1,\"browse\",{\"name\":\"i18n\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":75,\"column\":77},\"end\":{\"line\":75,\"column\":94}}}))\n    + \"</label>\\n                </div>\\n            </div>\\n\\n            <div class=\\\"call-to-action\\\">\\n                <div class=\\\"title banner\\\">\"\n    + alias2(__default(require(\"/docker/sharedemos/static/js/helpers/handlebars/i18n.js\")).call(alias1,\"call to action\",{\"name\":\"i18n\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":80,\"column\":42},\"end\":{\"line\":80,\"column\":67}}}))\n    + \"</div>\\n                <div class=\\\"sub-title\\\">\"\n    + alias2(__default(require(\"/docker/sharedemos/static/js/helpers/handlebars/i18n.js\")).call(alias1,\"create a call to action to go with this banner\",{\"name\":\"i18n\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":81,\"column\":39},\"end\":{\"line\":81,\"column\":96}}}))\n    + \"</div>\\n            </div>\\n            <div class=\\\"row cta-action\\\">\\n                <div class=\\\"col-xs-12 col-sm-8 col-md-8\\\">\\n                    <label>\\n                    <input type=\\\"url\\\" class=\\\"trim-input\\\"\\n                           name=\\\"banner-cta-link\\\" id=\\\"banner-cta-link\\\"\\n                           placeholder=\\\"https://\\\">\\n                    </label>\\n                </div>\\n                <div class=\\\"col-xs-12 col-sm-3 col-md-3\\\">\\n                    <label>\\n                        <input type=\\\"text\\\" class=\\\"trim-input\\\"\\n                               name=\\\"banner-cta-text\\\" id=\\\"banner-cta-text\\\" placeholder=\\\"BUTTON TEXT\\\">\\n                    </label>\\n                </div>\\n                <div class=\\\"col-xs-12 col-sm-1 col-md-1\\\">\\n                    <label>\\n                        <span id=\\\"add-cta\\\">add</span>\\n                    </label>\\n                </div>\\n            </div>\\n            <div class=\\\"cta-block\\\" id=\\\"cta-container\\\">\\n                <ol class=\\\"cta-items\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"cta_details\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(25, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":105,\"column\":20},\"end\":{\"line\":107,\"column\":29}}})) != null ? stack1 : \"\")\n    + \"                </ol>\\n            </div>\\n                \\n        </div>\\n        <div class=\\\"popup-footer\\\">\\n            <div class=\\\"form-footer\\\">\\n                <div class=\\\"cancel\\\">cancel</div>\\n                <input type=\\\"submit\\\" class=\\\"save\\\" value=\\\"save\\\" name=\\\"homepage-banner\\\" />\\n            </div>\\n            <div class=\\\"failed\\\">oops! saving failed</div>\\n            <div class=\\\"added\\\">saved successfully!</div>\\n            <div class=\\\"adding\\\">saving...<div class=\\\"cd-loading\\\"></div>\\n            </div>\\n        </div>\\n    </form>\\n</div>\\n\";\n},\"usePartial\":true,\"useData\":true});","var Handlebars = require(\"/docker/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"cta-data\\\" data-title=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"name\") || (depth0 != null ? lookupProperty(depth0,\"name\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":33},\"end\":{\"line\":1,\"column\":41}}}) : helper)))\n    + \"\\\" data-link=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"link\") || (depth0 != null ? lookupProperty(depth0,\"link\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"link\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":54},\"end\":{\"line\":1,\"column\":62}}}) : helper)))\n    + \"\\\" data-id=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"cta_id\") || (depth0 != null ? lookupProperty(depth0,\"cta_id\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cta_id\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":73},\"end\":{\"line\":1,\"column\":83}}}) : helper)))\n    + \"\\\">\\n\t<div class=\\\"cta-title\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"name\") || (depth0 != null ? lookupProperty(depth0,\"name\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":24},\"end\":{\"line\":2,\"column\":32}}}) : helper)))\n    + \"</div>\\n\t<div class=\\\"cta-link\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"link\") || (depth0 != null ? lookupProperty(depth0,\"link\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"link\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":23},\"end\":{\"line\":3,\"column\":31}}}) : helper)))\n    + \"</div>\\n\t<div class=\\\"remove-cta\\\">remove CTA</div>\\n</li>\";\n},\"useData\":true});","/*global define*/\ndefine([\n  \"underscore\",\n  \"jquery\",\n  \"backbone\",\n  \"../models/homepage_banner\",\n  \"../../tenant/common\",\n  \"../templates/create_form.handlebars\",\n  \"../templates/cta.handlebars\"\n], function(\n  _,\n  $,\n  Backbone,\n  HomepageBanner,\n  Common,\n  createForm,\n  CtaTemplate\n) {\n  \"use strict\";\n\n  var editView = Backbone.View.extend({\n\n    el: \"#dashboard_settings\",\n\n    events: {\n      'click input[name=\"enable_homepage_banner\"]:not(.active)' : 'showForm',\n      'submit form[name=homepage-banner]': 'submitDetails',\n      'change form[name=homepage-banner] input[name=\"banner-resource\"],form[name=homepage-banner] input[name=\"background-image\"]':\n        'validateMedia',\n      'click #remove-img, #remove-resource': 'removeMedia',\n      'click #add-cta': 'addCTA',\n      'click .remove-cta': 'removeCTA',\n      'click form[name=homepage-banner] .cancel': 'closeForm',\n      'click .banner-edit.active': 'edit',\n      'keyup input[type=\"url\"]': 'updateCTAUrl'\n    },\n\n    actionFailed: function(target){\n      setTimeout(()=>{\n        this.$(`.${target} .adding`).removeClass(\"slide-in is-submitted\");\n        this.$(`.${target} .failed`).addClass(\"slide-in\");\n        setTimeout(()=>{\n            this.$(`.${target} .failed`).removeClass(\"slide-in\");\n        }, 1000);\n      }, 1000);\n    },\n\n    actionSuccess: function(target){\n      this.$(`.${target} .adding`).removeClass(\"slide-in is-submitted\");\n      this.$(`.${target} .added`).addClass(\"slide-in\");\n      setTimeout(()=> {\n        this.$(`.${target} .added`).removeClass(\"slide-in\");\n        this.closeForm();\n      }, 1000);\n    },\n\n    actionInProgress: function(target){\n      this.$(`.${target} .adding`).addClass(\"slide-in is-submitted\");\n      },\n\n    addCTA: function(event) {\n      this.removeCustomErrorMessage();\n      let ctaUrl = this.$('input[name=\"banner-cta-link\"]');\n      if(!Common.validateUrl(ctaUrl.val())) {\n        this.customErrorMessage('Please Enter a valid URL', ctaUrl);\n        return false;\n      }\n      let ctaText = this.$('input[name=\"banner-cta-text\"]')\n      if (!ctaText.val()) {\n        this.customErrorMessage('Please provide a name for CTA button', ctaText );\n        return false;\n      }\n      let ctaData = {\n          link: ctaUrl.val(),\n          name: ctaText.val(),\n          cta_id: null\n      }\n      this.$(ctaUrl).val('');\n      this.$(ctaText).val('');\n      this.$('#cta-container .cta-items').append(CtaTemplate(ctaData));\n    },\n\n    closeForm: function() {\n      let popupName ='homepage-banner';\n      this.$(`.dashboard-overlay .${popupName}`).addClass(\"bounceOutUp\");\n      setTimeout(()=>{\n        this.$(`.dashboard-overlay .popup-box.${popupName}`).hide().removeClass(\"bounceOutUp\");\n        this.$(\".dashboard-overlay\").hide();\n      }, 300);\n    },\n\n    customErrorMessage: function(message, target, elem){\n      this.removeCustomErrorMessage();\n      var editToolTip = `<div class=\"error-message\">${message}</div>`;\n      target.after(editToolTip);\n      if(elem) elem.focus();\n    },\n\n    edit: function(event) {\n      let banner = new HomepageBanner();\n      banner.fetch({\n        success: (modle, response)=> {\n          this.showForm(event, response, true);\n        },\n        error: (response) => {\n          console.log(response.message)\n        }\n      });\n    },\n\n    removeCTA: function(event) {\n      let parent = this.$(event.currentTarget).parent();\n      if (parent.attr('data-id')) {\n        this.$(parent).addClass('hide').attr('attr-remove', true);\n      }else {\n        this.$(parent).remove();\n      }\n    },\n\n    removeCustomErrorMessage(){\n          this.$('.error-message').remove();\n          this.$('.file-name, .resource-name').show();\n    },\n\n    removeMedia: function(event) {\n      let fileNameClass = '.resource-name';\n      let parentClass = 'resource-added';\n      let target = $(event.currentTarget);\n      let isBannerIcon = this.$(target).parent().hasClass('image-added');\n      if(isBannerIcon) {\n        fileNameClass = '.file-name';\n        parentClass = 'image-added';\n        if (event.currentTarget.hasAttribute('image-added')) { \n          this.$(target).attr('data-remove-image', true);\n        }\n      }else if (event.currentTarget.hasAttribute('resource-added')){\n        this.$(target).attr('data-remove-resource', true);\n      }\n      this.$(target).parent().removeClass(parentClass).find(fileNameClass).empty();\n      this.$(target).siblings('input[type=file]').val('');\n      this.$(target).siblings('img').removeAttr('src');\n    },\n\n    submitDetails: function(event) {\n      event.preventDefault();\n      let currentFormName = this.$(event.currentTarget).attr('name');\n      let formName = `form[name=${currentFormName}]`;\n      let bannerTitle = this.$(`${formName} input[name='banner-title']`);\n      let bgImageFile = this.$('#upload-banner-image').val();\n       if (bannerTitle.val() && bannerTitle.val().match(/^[!@#$%^&*()_+\\-=\\[\\]{};':\"\\\\|,.<>\\/?]*$/) != null){\n        this.customErrorMessage(\n          'Provide a name with atleast an alphanumeric character',\n          this.$(bannerTitle).parent(),\n          this.$(bannerTitle)\n        );\n        return;\n      }\n      this.removeCustomErrorMessage();\n      this.saveDetails(formName);\n    },\n\n    saveDetails: function(formName) {\n      let bannerData = new FormData();\n      let bannerTitle = this.$(`${formName} input[name='banner-title']`).val();\n      let bannerDescription = this.$(`${formName} textarea[name='banner-description']`).val();\n      let ctaDetails = []\n      let ctaItems = this.$(`${formName} #cta-container .cta-items li`);\n      _.each(ctaItems, (ele, index) => {\n          let action;\n          let data = this.$(ele).data();\n          if (this.$(ele).attr('attr-remove') == 'true') {\n            action = 'remove';\n          }else if (!data.id){\n            action='add';\n          }\n          let cta = {\n            name: data.title,\n            options: {\n              type: 'link',\n              text: data.title,\n              href: data.link\n            },\n            cta_id: data.id,\n            action: action\n          }\n          ctaDetails.push(cta);\n      });\n\n      bannerData.append('title' ,bannerTitle);\n      bannerData.append('description', bannerDescription);\n      bannerData.append('cta_details', JSON.stringify(ctaDetails));\n\n      if (this.$('#remove-img').attr('data-remove-image')) {\n        bannerData.append('remove_background_image', true);\n      }\n\n      if (this.$('#remove-resource').attr('data-remove-resource')){\n        bannerData.append('remove_resource', true);\n      }\n\n      bannerData.append('background_image', this.$('#upload-banner-image')[0].files[0]);\n      bannerData.append('banner_resource', this.$('#upload-banner-resource')[0].files[0]);\n      let banner_id = this.$(`${formName}`).attr('data-id') || null;\n      let banner = new HomepageBanner({id: banner_id});\n      this.actionInProgress('homepage-banner');\n      var root = this;\n      banner.save(bannerData,{\n          processData: false,\n          cache: false,\n          contentType: false,\n          data: bannerData,\n          success:function(response) {\n            root.actionSuccess('homepage-banner');\n            root.$('#enable_homepage_banner').addClass('active');                  \n            if([\"NOT CREATED\", \"DELETED\"].includes(response.attributes.status)){\n                root.$(\".banner-edit\").removeClass(\"active\");\n                root.$(\"input#enable_homepage_banner\")\n                    .removeAttr(\"checked\")\n                    .removeClass(\"active\");\n            }\n          },\n          error:function(xhr, status, error) {\n            console.log(status.responseText);\n            root.actionFailed('homepage-banner');\n          },\n      });\n    },\n\n    showForm: function(event, data={}, is_edit=false) {\n      data.is_edit = is_edit;\n      data.imageAdded = true;\n      if (!event.currentTarget.checked && !is_edit) return ;\n      if(!data.background_image) {\n          data.background_image = {\n            path: `${document.cdn_url}/static/images/author/img-icon.png`,\n            name: data.title\n          }\n          data.imageAdded = false;\n      }\n      this.$el.find('.popup-wrap').html(createForm(data));\n      this.$(\".dashboard-overlay\").css({\n        \"display\": \"table\"\n      });\n      let popupName ='homepage-banner';\n      this.$(`.dashboard-overlay .popup-box.${popupName}`).show().addClass(\"bounceInDown\");\n      setTimeout(()=>{\n        this.$(`.dashboard-overlay .popup-box.${popupName}`).removeClass(\"bounceInDown\");\n      }, 300);\n    },\n\n    updateCTAUrl: function(event){\n            this.removeCustomErrorMessage();\n            if(event.altKey || ([8, 9, 13, 16, 17, 18, 19, 20, 27, 33, 34, 35, 36, 37, 38, 39, 40, 45, 46]).indexOf(event.keyCode) !== -1) return;\n            var value = $(event.target).val();\n            if(value && value.length && value.length > 4 && value.indexOf('http') !== 0){\n                $(event.target).val('https://' + value);\n            }\n        },\n\n    validateMedia: function(event) {\n      let message, validStatus = true;\n      this.removeCustomErrorMessage();\n      let media = event.target.files && event.target.files[0];\n      let type = (media.type).split('/')[0];\n      let fileSizeMB = type == 'video' ? (media.size / 1000000) : '';\n      let target = $(event.currentTarget);\n      if (this.$(target).attr('id') == 'upload-banner-image' && type !== 'image') {\n        message = 'Oops! Please upload a valid image file.';\n       this.customErrorMessage(message, this.$('.file-name'));\n       this.$('.file-name').hide()\n       return\n      }\n\n      if (!['image', 'video'].includes(type)) {\n        validStatus = false;\n        message =  `${type} file not supported`;\n      }\n\n      if (type == 'image') {\n          if (!media || !(/\\.(jfif|jpg|jpeg|png|gif)$/i).test(media.name)) {\n              validStatus = false;\n              message =\"Oops! Please upload a valid image file.\";\n          }\n\n      }else if (type == 'video') {\n          if (!media || !(/\\.(mp4|mkv|wmv|mpeg4|webm|ogg)$/i).test(media.name)) {\n              validStatus = false;\n              message =\"Oops! Please upload a valid video file.\";\n          }else if (fileSizeMB > Common.VIDEO_FILE_MAX_SIZE) {\n              validStatus = false;\n              message = `File size is too large. Allowed limit: ${Common.VIDEO_FILE_MAX_SIZE}MB.`;\n          }\n      }\n      if (this.$(target).attr('id') == 'upload-banner-image' && !validStatus) {\n        this.customErrorMessage(message, this.$('.file-name'));\n        this.$('.file-name').hide()\n        return false;\n      }else if(!validStatus) {\n        this.customErrorMessage(message, this.$('.resource-name'));\n        this.$('.resource-name').hide()\n        return false;\n      }\n\n      if (this.$(target).attr('id') == 'upload-banner-image') {\n        this.$('#banner-image-preview').attr('src', URL.createObjectURL(media));\n        this.$(target).parent().addClass('image-added').find('.file-name').text(media.name);\n      }else {\n        if (type == 'image') this.$('#upload-resource-preview').attr('src', URL.createObjectURL(media));\n        this.$(target).parent().addClass('resource-added').\n          find('.resource-name').removeClass('hide').text(media.name);\n        this.$('#resource-error-message').addClass('hide');\n      }\n    },    \n    \n  });\n\n  return editView;\n});\n"],"sourceRoot":""}