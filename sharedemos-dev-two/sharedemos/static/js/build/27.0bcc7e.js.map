{"version":3,"sources":["webpack:///./sharedemos/static/js/apps/journeys/models/journeys.js","webpack:///./sharedemos/static/js/apps/journeys/templates/filters.handlebars","webpack:///./sharedemos/static/js/apps/journeys/templates/items.handlebars","webpack:///./sharedemos/static/js/apps/journeys/views/home.js","webpack:///./sharedemos/static/js/helpers/cookies.js"],"names":["define","Backbone","Journeys","Model","extend","urlRoot","_","$","Filters","JourneysList","MasterJourneysView","View","el","journeysList","events","initialize","listAllJourneys","journeys","root","fetch","success","model","resp","length","addClass","args","next","window","location","pathname","hash","param","href","origin","filters","each","data","tags","tag","name","unique","concat","options","sort","html","error","console","log","validateJourney","journeyTags","checkedItems","checkedGroups","Object","keys","journeyGroups","formattedJourneyTags","idx","push","isValid","grp","itemIndex","inArray","journeyGroup","journeyOptions","checkedGrpOptions","booleanList","option","includes","allFalses","every","val","getCheckedItems","filterBlocks","ele","groupName","optList","opt","attr","filterJourney","e","filteredJourneys","journey","SDCookies","getItem","sKey","hasItem","unescape","document","cookie","replace","RegExp","escape","setItem","sValue","vEnd","sPath","sDomain","bSecure","test","sExpires","constructor","Number","Infinity","String","Date","toGMTString","removeItem","aKeys","split","nIdx"],"mappings":";;;;;;;;;AAAA;AACAA,iCAAO,CACH,0EADG,CAAD,mCAEH,UAAUC,QAAV,EAAoB;AACnB;;AAEA,MAAIC,QAAQ,GAAGD,QAAQ,CAACE,KAAT,CAAeC,MAAf,CAAsB;AACjCC,WAAO,EAAE;AADwB,GAAtB,CAAf;AAIA,SAAOH,QAAP;AACH,CAVK;AAAA,oGAAN,C;;;;;;;;;;;ACDA,iBAAiB,mBAAO,CAAC,kFAA4C;AACrE,yBAAyB,uDAAuD;AAChF,iEAAiE;AACjE;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,2GAA2G,qBAAqB,uBAAuB,uHAAuH,SAAS,oBAAoB,QAAQ,wBAAwB;AAC3U;AACA,CAAC;AACD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2GAA2G,UAAU,uBAAuB,uHAAuH,SAAS,oBAAoB,QAAQ,uBAAuB;AAC/T,CAAC,sCAAsC,E;;;;;;;;;;;AC7CvC,iBAAiB,mBAAO,CAAC,kFAA4C;AACrE,yBAAyB,uDAAuD;AAChF,iEAAiE;AACjE,qFAAqF;AACrF;AACA;AACA;AACA;AACA;;AAEA;AACA,0MAA0M,uBAAuB,oBAAoB,SAAS,qBAAqB,QAAQ,uBAAuB;AAClT;AACA,0HAA0H,qBAAqB,+FAA+F,SAAS,qBAAqB,QAAQ,wBAAwB;AAC5S;AACA,0MAA0M,uBAAuB,oBAAoB,SAAS,sBAAsB,QAAQ,wBAAwB;AACpT;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iTAAiT,GAAG,4BAA4B,oBAAoB,SAAS,qBAAqB,QAAQ,uBAAuB;AACja;AACA,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2GAA2G,UAAU,uBAAuB,gFAAgF,SAAS,oBAAoB,QAAQ,wBAAwB;AACzR;AACA,CAAC,gBAAgB,E;;;;;;;;;;;ACzCjB;AACAF,iCAAO,CAAC,gFAAD,EACC,2CADD,EAEC,0EAFD,EAGC,wGAHD,EAIC,+HAJD,EAKC,2HALD,CAAD,mCAMH,UAAUM,CAAV,EAAaC,CAAb,EAAgBN,QAAhB,EAA0BC,QAA1B,EAAoCM,OAApC,EAA6CC,YAA7C,EAA2D;AAC1D;;AAEA,MAAIC,kBAAkB,GAAGT,QAAQ,CAACU,IAAT,CAAcP,MAAd,CAAqB;AAE1CQ,MAAE,EAAE,iBAFsC;AAI1CC,gBAAY,EAAG,EAJ2B;AAM1CC,UAAM,EAAE;AACL,4BAAsB;AADjB,KANkC;;AAU1CC,cAAU,GAAG;AACT,WAAKC,eAAL;AACH,KAZyC;;AAc1CA,mBAAe,GAAG;AACd,UAAIC,QAAQ,GAAG,IAAIf,QAAJ,EAAf;AACA,UAAIgB,IAAI,GAAG,IAAX;AACAD,cAAQ,CAACE,KAAT,CAAe;AACXC,eAAO,CAACC,KAAD,EAAQC,IAAR,EAAc;AACjB,cAAG,CAACA,IAAI,CAACC,MAAT,EAAiB;AACbL,gBAAI,CAACX,CAAL,CAAO,gBAAP,EAAyBiB,QAAzB,CAAkC,mBAAlC;AACA;AACH;;AACD,cAAGF,IAAI,CAAC,SAAD,CAAP,EAAoB;AAChB,gBAAIG,IAAI,GAAG;AACPC,kBAAI,EAAEC,MAAM,CAACC,QAAP,CAAgBC,QAAhB,GAA2BF,MAAM,CAACC,QAAP,CAAgBE;AAD1C,aAAX;AAGAR,gBAAI,CAAC,SAAD,CAAJ,IAAmB,MAAMf,CAAC,CAACwB,KAAF,CAAQN,IAAR,CAAzB;AACAE,kBAAM,CAACC,QAAP,CAAgBI,IAAhB,GAAuBL,MAAM,CAACC,QAAP,CAAgBK,MAAhB,GAAyBX,IAAI,CAAC,SAAD,CAApD;AACH;;AACDJ,cAAI,CAACL,YAAL,GAAoBS,IAApB;AAEA,cAAIY,OAAO,GAAG,EAAd,CAdiB,CAejB;AACA;;AACA5B,WAAC,CAAC6B,IAAF,CAAOb,IAAP,EAAcc,IAAD,IAAS;AAClB9B,aAAC,CAAC6B,IAAF,CAAOC,IAAI,CAACC,IAAZ,EAAmBC,GAAD,IAAO;AACrB,kBAAIJ,OAAO,CAACI,GAAG,CAACC,IAAL,CAAX,EAAsB;AAClBL,uBAAO,CAACI,GAAG,CAACC,IAAL,CAAP,GAAoBjC,CAAC,CAACkC,MAAF,CAASN,OAAO,CAACI,GAAG,CAACC,IAAL,CAAP,CAAkBE,MAAlB,CAAyBH,GAAG,CAACI,OAA7B,CAAT,EAAgDC,IAAhD,EAApB;AACH,eAFD,MAEK;AACDT,uBAAO,CAACI,GAAG,CAACC,IAAL,CAAP,GAAoBD,GAAG,CAACI,OAAJ,CAAYC,IAAZ,EAApB;AACH;AACJ,aAND;AAQH,WATD;;AAUAzB,cAAI,CAACX,CAAL,CAAO,gBAAP,EAAyBqC,IAAzB,CAA8BpC,OAAO,CAAC0B,OAAD,CAArC;AACAhB,cAAI,CAACX,CAAL,CAAO,cAAP,EAAuBqC,IAAvB,CAA4BnC,YAAY,CAACa,IAAD,CAAxC;AACAJ,cAAI,CAACX,CAAL,CAAO,gBAAP,EAAyBiB,QAAzB,CAAkC,gBAAlC;AACH,SA/BU;;AAgCXqB,aAAK,CAACxB,KAAD,EAAQC,IAAR,EAAa;AACdwB,iBAAO,CAACC,GAAR,CAAa,sBAAb,EAAqC1B,KAArC,EAA4CC,IAA5C;AACH;;AAlCU,OAAf;AAoCH,KArDyC;;AAuD1C0B,mBAAe,CAACC,WAAD,EAAcC,YAAd,EAA2B;AACtC;AACA;AAEA;AACA;AAEA,UAAIC,aAAa,GAAGC,MAAM,CAACC,IAAP,CAAYH,YAAZ,CAApB,CAPsC,CAStC;AACA;AAEA;AACA;;AAEA,UAAII,aAAa,GAAG,EAApB;AACA,UAAIC,oBAAoB,GAAG,EAA3B;AACAhD,OAAC,CAAC4B,IAAF,CAAOc,WAAP,EAAoB,CAACO,GAAD,EAAMlB,GAAN,KAAc;AAC9BgB,qBAAa,CAACG,IAAd,CAAmBnB,GAAG,CAACC,IAAvB;AACAgB,4BAAoB,CAACjB,GAAG,CAACC,IAAL,CAApB,GAAiCD,GAAG,CAACI,OAArC;AACH,OAHD;AAKA,UAAIgB,OAAO,GAAG,IAAd;AAEAnD,OAAC,CAAC4B,IAAF,CAAOgB,aAAP,EAAsB,CAACK,GAAD,EAAMG,GAAN,KAAa;AAE/B;AACA;AACA;AACA;AAEA,YAAIC,SAAS,GAAGrD,CAAC,CAACsD,OAAF,CAAUF,GAAV,EAAeL,aAAf,CAAhB;;AAEA,YAAGM,SAAS,KAAK,CAAC,CAAlB,EAAoB;AAChBF,iBAAO,GAAG,KAAV;AACA,iBAAO,KAAP,CAFgB,CAGhB;AACA;AACH;AAEJ,OAhBD;AAkBA,UAAG,CAACA,OAAJ,EACI,OAAO,KAAP,CA3CkC,CA6CtC;;AACAnD,OAAC,CAAC4B,IAAF,CAAOoB,oBAAP,EAA6B,CAACO,YAAD,EAAeC,cAAf,KAAiC;AAE1D,YAAIH,SAAS,GAAGrD,CAAC,CAACsD,OAAF,CAAUC,YAAV,EAAwBX,aAAxB,CAAhB;;AACA,YAAIS,SAAS,KAAK,CAAC,CAAnB,EAAqB;AAEjB,cAAID,GAAG,GAAGR,aAAa,CAACS,SAAD,CAAvB;AACA,cAAII,iBAAiB,GAAGd,YAAY,CAACS,GAAD,CAApC;AACA,cAAIM,WAAW,GAAG,EAAlB,CAJiB,CAMjB;AACA;;AACA1D,WAAC,CAAC4B,IAAF,CAAO4B,cAAP,EAAuB,CAACP,GAAD,EAAMU,MAAN,KAAiB;AAEpC,gBAAGF,iBAAiB,CAACG,QAAlB,CAA2BD,MAA3B,CAAH,EAAsC;AAClCD,yBAAW,CAACR,IAAZ,CAAiB,IAAjB;AACH,aAFD,MAEK;AACDQ,yBAAW,CAACR,IAAZ,CAAiB,KAAjB;AACH;AACJ,WAPD,EARiB,CAiBjB;AACA;;AAEA,cAAIW,SAAS,GAAG9D,CAAC,CAAC+D,KAAF,CAAQJ,WAAR,EAAsBK,GAAD,IAAS;AAAC,mBAAOA,GAAG,KAAK,KAAf;AAAqB,WAApD,CAAhB;;AAEA,cAAGF,SAAH,EAAa;AACTV,mBAAO,GAAG,KAAV;AACA,mBAAO,KAAP;AACH;AACJ;AAEJ,OA/BD;AAiCA,aAAOA,OAAP;AACH,KAvIyC;;AAyI1Ca,mBAAe,GAAG;AACd,UAAIC,YAAY,GAAGjE,CAAC,CAAC,uBAAD,CAApB;AAEA,UAAI2C,YAAY,GAAG,EAAnB;AACAsB,kBAAY,CAACrC,IAAb,CAAkB,UAASqB,GAAT,EAAciB,GAAd,EAAmB;AACjC,YAAIC,SAAS,GAAGnE,CAAC,CAACkE,GAAD,CAAD,CAAOrC,IAAP,CAAY,OAAZ,CAAhB;AACA,YAAIuC,OAAO,GAAG,EAAd;AACApE,SAAC,CAAC4B,IAAF,CAAO5B,CAAC,CAAE,4BAA2BmE,SAAU,YAAvC,CAAR,EAA6D,UAASlB,GAAT,EAAcoB,GAAd,EAAmB;AAC5ED,iBAAO,CAAClB,IAAR,CAAalD,CAAC,CAACqE,GAAD,CAAD,CAAOC,IAAP,CAAY,MAAZ,CAAb;AACH,SAFD;AAGA,YAAGF,OAAO,CAACpD,MAAX,EACI2B,YAAY,CAACwB,SAAD,CAAZ,GAA0BC,OAA1B;AACP,OARD;AASA,aAAOzB,YAAP;AACH,KAvJyC;;AAyJ1C4B,iBAAa,CAACC,CAAD,EAAI;AAEb,UAAI7B,YAAY,GAAG,KAAKqB,eAAL,EAAnB;AACA,UAAIS,gBAAgB,GAAG,EAAvB;AAEAzE,OAAC,CAAC4B,IAAF,CAAO,KAAKtB,YAAZ,EAA0B,CAAC2C,GAAD,EAAMyB,OAAN,KAAkB;AAExC,YAAIvB,OAAO,GAAG,KAAKV,eAAL,CAAqBiC,OAAO,CAAC5C,IAA7B,EAAmCa,YAAnC,CAAd;AAEA,YAAGQ,OAAH,EACIsB,gBAAgB,CAACvB,IAAjB,CAAsBwB,OAAtB;AAEP,OAPD;AASA,WAAK1E,CAAL,CAAO,cAAP,EAAuBqC,IAAvB,CAA4BnC,YAAY,CAACuE,gBAAD,CAAxC;AACH;;AAxKyC,GAArB,CAAzB;AA2KA,SAAOtE,kBAAP;AACH,CArLK;AAAA,oGAAN,C;;;;;;;;;;;ACDAwE,SAAS,GAAI,YAAW;AACpB,MAAIA,SAAS,GAAG;AACdC,WAAO,EAAE,UAAUC,IAAV,EAAgB;AACvB,UAAI,CAACA,IAAD,IAAS,CAAC,KAAKC,OAAL,CAAaD,IAAb,CAAd,EAAkC;AAAE,eAAO,IAAP;AAAc;;AAClD,aAAOE,QAAQ,CAACC,QAAQ,CAACC,MAAT,CAAgBC,OAAhB,CAAwB,IAAIC,MAAJ,CAAW,kBAAkBC,MAAM,CAACP,IAAD,CAAN,CAAaK,OAAb,CAAqB,aAArB,EAAoC,MAApC,CAAlB,GAAgE,oCAA3E,CAAxB,EAA0I,IAA1I,CAAD,CAAf;AACD,KAJa;AAKdG,WAAO,EAAE,UAAUR,IAAV,EAAgBS,MAAhB,EAAwBC,IAAxB,EAA8BC,KAA9B,EAAqCC,OAArC,EAA8CC,OAA9C,EAAuD;AAC9D,UAAI,CAACb,IAAD,IAAS,6CAA6Cc,IAA7C,CAAkDd,IAAlD,CAAb,EAAsE;AAAE;AAAS;;AACjF,UAAIe,QAAQ,GAAG,EAAf;;AACA,UAAIL,IAAJ,EAAU;AACR,gBAAQA,IAAI,CAACM,WAAb;AACE,eAAKC,MAAL;AACEF,oBAAQ,GAAGL,IAAI,KAAKQ,QAAT,GAAoB,yCAApB,GAAgE,eAAeR,IAA1F;AACA;;AACF,eAAKS,MAAL;AACEJ,oBAAQ,GAAG,eAAeL,IAA1B;AACA;;AACF,eAAKU,IAAL;AACEL,oBAAQ,GAAG,eAAeL,IAAI,CAACW,WAAL,EAA1B;AACA;AATJ;AAWD;;AACDlB,cAAQ,CAACC,MAAT,GAAkBG,MAAM,CAACP,IAAD,CAAN,GAAe,GAAf,GAAqBO,MAAM,CAACE,MAAD,CAA3B,GAAsCM,QAAtC,IAAkDH,OAAO,GAAG,cAAcA,OAAjB,GAA2B,EAApF,KAA2FD,KAAK,GAAG,YAAYA,KAAf,GAAuB,EAAvH,KAA8HE,OAAO,GAAG,UAAH,GAAgB,EAArJ,CAAlB;AACD,KAtBa;AAuBdS,cAAU,EAAE,UAAUtB,IAAV,EAAgBW,KAAhB,EAAuB;AACjC,UAAI,CAACX,IAAD,IAAS,CAAC,KAAKC,OAAL,CAAaD,IAAb,CAAd,EAAkC;AAAE;AAAS;;AAC7CG,cAAQ,CAACC,MAAT,GAAkBG,MAAM,CAACP,IAAD,CAAN,GAAe,0CAAf,IAA6DW,KAAK,GAAG,YAAYA,KAAf,GAAuB,EAAzF,CAAlB;AACD,KA1Ba;AA2BdV,WAAO,EAAE,UAAUD,IAAV,EAAgB;AACvB,aAAQ,IAAIM,MAAJ,CAAW,gBAAgBC,MAAM,CAACP,IAAD,CAAN,CAAaK,OAAb,CAAqB,aAArB,EAAoC,MAApC,CAAhB,GAA8D,SAAzE,CAAD,CAAsFS,IAAtF,CAA2FX,QAAQ,CAACC,MAApG,CAAP;AACD,KA7Ba;AA8BdnC,QAAI;AAAE;AAAiD,gBAAY;AACjE,UAAIsD,KAAK,GAAGpB,QAAQ,CAACC,MAAT,CAAgBC,OAAhB,CAAwB,yDAAxB,EAAmF,EAAnF,EAAuFmB,KAAvF,CAA6F,qBAA7F,CAAZ;;AACA,WAAK,IAAIC,IAAI,GAAG,CAAhB,EAAmBA,IAAI,GAAGF,KAAK,CAACpF,MAAhC,EAAwCsF,IAAI,EAA5C,EAAgD;AAAEF,aAAK,CAACE,IAAD,CAAL,GAAcvB,QAAQ,CAACqB,KAAK,CAACE,IAAD,CAAN,CAAtB;AAAsC;;AACxF,aAAOF,KAAP;AACD;AAlCa,GAAhB;AAqCA,SAAOzB,SAAP;AACH,CAvCW,EAAZ,C","file":"27.0bcc7e.js","sourcesContent":["/*global define */\ndefine([\n    'backbone'\n], function (Backbone) {\n    'use strict';\n\n    var Journeys = Backbone.Model.extend({\n        urlRoot: \"/api/journey\",\n    });\n\n    return Journeys;\n});","var Handlebars = require(\"/docker/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data,blockParams) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    <div class=\\\"journey-filter-block\\\" data-group=\\\"\"\n    + alias2(alias1(blockParams[0][1], depth0))\n    + \"\\\">\\n        <div class=\\\"filter-heading-block\\\">\\n            <h4 class=\\\"filter-heading\\\">\"\n    + alias2(alias1(blockParams[0][1], depth0))\n    + \"</h4>\\n        </div>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),blockParams[0][0],{\"name\":\"each\",\"hash\":{},\"fn\":container.program(2, data, 0, blockParams),\"inverse\":container.noop,\"data\":data,\"blockParams\":blockParams,\"loc\":{\"start\":{\"line\":7,\"column\":8},\"end\":{\"line\":17,\"column\":17}}})) != null ? stack1 : \"\")\n    + \"    </div>\\n\";\n},\"2\":function(container,depth0,helpers,partials,data,blockParams) {\n    var alias1=container.lambda, alias2=container.escapeExpression;\n\n  return \"            <div>\\n                <div class=\\\"checkbox\\\">\\n                    <label class=\\\"checkbox-label\\\" for=\\\"\"\n    + alias2(alias1(blockParams[1][1], depth0))\n    + \"-\"\n    + alias2(alias1(depth0, depth0))\n    + \"\\\" >\\n                        <input type=\\\"checkbox\\\" class=\\\"filter-item\\\" data-group=\\\"\"\n    + alias2(alias1(blockParams[1][1], depth0))\n    + \"\\\" id=\\\"\"\n    + alias2(alias1(blockParams[1][1], depth0))\n    + \"-\"\n    + alias2(alias1(depth0, depth0))\n    + \"\\\" name=\\\"\"\n    + alias2(alias1(depth0, depth0))\n    + \"\\\">\\n                        <span class=\\\"checkbox-icon\\\"><i class=\\\"cr-icon glyphicon glyphicon-ok\\\"></i></span>\\n                        \"\n    + alias2(alias1(depth0, depth0))\n    + \"\\n                    </label>\\n                </div>\\n            </div>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data,blockParams) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<!-- Journeys filter -->\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 2, blockParams),\"inverse\":container.noop,\"data\":data,\"blockParams\":blockParams,\"loc\":{\"start\":{\"line\":2,\"column\":0},\"end\":{\"line\":19,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true,\"useBlockParams\":true});","var Handlebars = require(\"/docker/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"        <div class=\\\"col-xs-12 col-sm-6 col-md-4 item-block-wrapper\\\">\\n            <div class=\\\"item-block\\\">\\n                <a href=\\\"/j/\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"slug\") || (depth0 != null ? lookupProperty(depth0,\"slug\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"slug\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":28},\"end\":{\"line\":6,\"column\":36}}}) : helper)))\n    + \"\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"icon_path\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(2, data, 0),\"inverse\":container.program(4, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":20},\"end\":{\"line\":11,\"column\":27}}})) != null ? stack1 : \"\")\n    + \"                    <h5 class=\\\"card-title\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"name\") || (depth0 != null ? lookupProperty(depth0,\"name\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":12,\"column\":43},\"end\":{\"line\":12,\"column\":51}}}) : helper)))\n    + \"</h5>\\n                </a>\\n            </div>\\n        </div>\\n\";\n},\"2\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"                        <img src=\\\"/static/media/\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"icon_path\") || (depth0 != null ? lookupProperty(depth0,\"icon_path\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"icon_path\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":48},\"end\":{\"line\":8,\"column\":61}}}) : helper)))\n    + \"\\\" class=\\\"card-img-top\\\" />\\n\";\n},\"4\":function(container,depth0,helpers,partials,data) {\n    return \"                        <img src=\\\"/static/images/journey-default-icon.jpg\\\" class=\\\"card-img-top img-responsive center-block\\\" />\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<!-- Journeys list -->\\n<div class=\\\"row items-block-wrapper\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":4},\"end\":{\"line\":16,\"column\":13}}})) != null ? stack1 : \"\")\n    + \"</div>\";\n},\"useData\":true});","/*global define*/\ndefine(['underscore',\n        'jquery',\n        'backbone',\n        '../models/journeys',\n        '../templates/filters.handlebars',\n        '../templates/items.handlebars'\n], function (_, $, Backbone, Journeys, Filters, JourneysList) {\n    'use strict';\n\n    var MasterJourneysView = Backbone.View.extend({\n\n        el: '#main_container',\n\n        journeysList : [],\n\n        events: {\n           'click .filter-item': 'filterJourney'\n        },\n\n        initialize() {\n            this.listAllJourneys()\n        },\n\n        listAllJourneys() {\n            let journeys = new Journeys();\n            let root = this;\n            journeys.fetch({\n                success(model, resp) {\n                    if(!resp.length) {\n                        root.$('.journey-block').addClass('content-not-found')\n                        return;\n                    }\n                    if(resp['ret_url']) {\n                        let args = {\n                            next: window.location.pathname + window.location.hash\n                        }\n                        resp['ret_url'] += '?' + $.param(args);\n                        window.location.href = window.location.origin + resp['ret_url'];\n                    }\n                    root.journeysList = resp;\n\n                    let filters = {}\n                    // Get filters group name and its options.\n                    // filters = {groupName(key): options(value)}\n                    _.each(resp, (data)=> {\n                        _.each(data.tags, (tag)=>{\n                            if (filters[tag.name]){\n                                filters[tag.name] = _.unique(filters[tag.name].concat(tag.options)).sort();\n                            }else{\n                                filters[tag.name] = tag.options.sort();\n                            }\n                        })\n\n                    });\n                    root.$('.filters-block').html(Filters(filters));\n                    root.$('.items-block').html(JourneysList(resp));\n                    root.$('.journey-block').addClass('content-loaded');\n                },\n                error(model, resp){\n                    console.log( 'something went wrong', model, resp );\n                }\n            });\n        },\n\n        validateJourney(journeyTags, checkedItems){\n            // 'checkedItems' is an object containing checked groups and options,\n            // checkedItems = {'CHECKED_GROUP': ['LIST_OF_CHECKED_OPTIONS'], ...}\n\n            // Check if the journey has all the groups which are checked,\n            // and atleast one of the options in each group.\n\n            let checkedGroups = Object.keys(checkedItems);\n\n            // The journey tags will be in this format:\n            // journeyTags = [{'name': 'GROUP_NAME', 'options': ['LIST OF OPTIONS']}, ...]\n\n            // Now the below method converts it into:\n            // formattedJourneyTags = { 'GROUP_NAME': ['LIST OF OPTIONS'], ... }\n\n            let journeyGroups = [];\n            let formattedJourneyTags = {};\n            $.each(journeyTags, (idx, tag) => {\n                journeyGroups.push(tag.name);\n                formattedJourneyTags[tag.name] = tag.options;\n            });\n\n            var isValid = true;\n\n            $.each(checkedGroups, (idx, grp)=> {\n\n                // Check if the journey has groups which are 'checked'.\n                // Even if one of the checked group is not present in the journey,\n                // then its not displayed, as there is an 'AND' condition\n                // between the groups.\n\n                let itemIndex = $.inArray(grp, journeyGroups);\n\n                if(itemIndex === -1){\n                    isValid = false;\n                    return false;\n                    // returning 'false' inside a $.each will actually\n                    // 'break' the entire execution and exits the iteration.\n                }\n\n            });\n\n            if(!isValid)\n                return false;\n\n            // Check if any one of the journey options are checked.\n            $.each(formattedJourneyTags, (journeyGroup, journeyOptions)=> {\n\n                let itemIndex = $.inArray(journeyGroup, checkedGroups);\n                if (itemIndex !== -1){\n\n                    let grp = checkedGroups[itemIndex];\n                    let checkedGrpOptions = checkedItems[grp];\n                    let booleanList = [];\n\n                    // The journey whose options doesn't have any one of the\n                    // checked option, will not be displayed.\n                    $.each(journeyOptions, (idx, option) => {\n\n                        if(checkedGrpOptions.includes(option)){\n                            booleanList.push(true);\n                        }else{\n                            booleanList.push(false);\n                        }\n                    });\n\n                    // The booleanList will contain all false values,\n                    // if the journey's options doesn't include any one of the checked option.\n\n                    let allFalses = _.every(booleanList, (val) => {return val === false});\n\n                    if(allFalses){\n                        isValid = false;\n                        return false;\n                    }\n                }\n\n            });\n\n            return isValid\n        },\n\n        getCheckedItems() {\n            let filterBlocks = $('.journey-filter-block');\n\n            let checkedItems = {};\n            filterBlocks.each(function(idx, ele) {\n                let groupName = $(ele).data('group');\n                let optList = [];\n                $.each($(`.filter-item[data-group=\"${groupName}\"]:checked`), function(idx, opt) {\n                    optList.push($(opt).attr('name'));\n                } )\n                if(optList.length)\n                    checkedItems[groupName] = optList;\n            });\n            return checkedItems\n        },\n\n        filterJourney(e) {\n\n            let checkedItems = this.getCheckedItems();\n            let filteredJourneys = []\n\n            $.each(this.journeysList, (idx, journey) => {\n\n                let isValid = this.validateJourney(journey.tags, checkedItems);\n\n                if(isValid)\n                    filteredJourneys.push(journey)\n\n            })\n\n            this.$('.items-block').html(JourneysList(filteredJourneys));\n        },\n    });\n\n    return MasterJourneysView;\n});\n","SDCookies = (function() {\n    var SDCookies = {\n      getItem: function (sKey) {\n        if (!sKey || !this.hasItem(sKey)) { return null; }\n        return unescape(document.cookie.replace(new RegExp(\"(?:^|.*;\\\\s*)\" + escape(sKey).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\\\\s*((?:[^;](?!;))*[^;]?).*\"), \"$1\"));\n      },\n      setItem: function (sKey, sValue, vEnd, sPath, sDomain, bSecure) {\n        if (!sKey || /^(?:expires|max\\-age|path|domain|secure)$/i.test(sKey)) { return; }\n        var sExpires = \"\";\n        if (vEnd) {\n          switch (vEnd.constructor) {\n            case Number:\n              sExpires = vEnd === Infinity ? \"; expires=Tue, 19 Jan 2038 03:14:07 GMT\" : \"; max-age=\" + vEnd;\n              break;\n            case String:\n              sExpires = \"; expires=\" + vEnd;\n              break;\n            case Date:\n              sExpires = \"; expires=\" + vEnd.toGMTString();\n              break;\n          }\n        }\n        document.cookie = escape(sKey) + \"=\" + escape(sValue) + sExpires + (sDomain ? \"; domain=\" + sDomain : \"\") + (sPath ? \"; path=\" + sPath : \"\") + (bSecure ? \"; secure\" : \"\");\n      },\n      removeItem: function (sKey, sPath) {\n        if (!sKey || !this.hasItem(sKey)) { return; }\n        document.cookie = escape(sKey) + \"=; expires=Thu, 01 Jan 1970 00:00:00 GMT\" + (sPath ? \"; path=\" + sPath : \"\");\n      },\n      hasItem: function (sKey) {\n        return (new RegExp(\"(?:^|;\\\\s*)\" + escape(sKey).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\")).test(document.cookie);\n      },\n      keys: /* optional method: you can safely remove it! */ function () {\n        var aKeys = document.cookie.replace(/((?:^|\\s*;)[^\\=]+)(?=;|$)|^\\s*|\\s*(?:\\=[^;]*)?(?:\\1|$)/g, \"\").split(/\\s*(?:\\=[^;]*)?;\\s*/);\n        for (var nIdx = 0; nIdx < aKeys.length; nIdx++) { aKeys[nIdx] = unescape(aKeys[nIdx]); }\n        return aKeys;\n      }\n    };\n\n    return SDCookies;\n})();"],"sourceRoot":""}