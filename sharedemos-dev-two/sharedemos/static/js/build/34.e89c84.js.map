{"version":3,"sources":["webpack:///./sharedemos/static/js/tenant/views/main.js"],"names":["define","_","$","Backbone","Common","translate","MainView","View","extend","el","events","e","registerServiceWorker","closeSearchBox","initialize","on","showSearchBox","showMobileSearchBox","clearInputText","changeLanguage","hideEntities","triggerSearchGAEvent","event","linkElement","currentTarget","searchBreadcrumb","find","text","hasClass","triggerGAevent","triggerDownloadOffline","container","root","addClass","setTimeout","removeClass","navigator","serviceWorker","controller","register","scope","then","registration","localStorageTenantName","window","location","origin","localStorage","setItem","JSON","stringify","Array","installing","addEventListener","target","state","console","log","startDownloadOffline","$el","ready","catch","err","cancelDownloadOffline","alert","unRegisterServiceWorker","getRegistrations","registrations","i","length","unregister","reload","downloadStatus","productTreeDetails","visit_activity","product_slug","get","section_slug","domainPath","productTreeData","webpageServiceWorkerCommunication","walkthroughs","getItem","staticCacheData","allProductsData","messageData","tenantFooterImage","document","walkthroughs_list","remainingWalkthroughs","walkthrough_slug","getAttribute","data","localStorageCacheManagement","section","action","cacheName","sections","parse","push","index","indexOf","splice","failedEntityManagement","entity","slug","cacheEntity","entityList","toggleClass","downloadingPlaylistOffline","progress","angle","css","successPlaylistOffline","errorPlaylistOffline","first_translated_text","second_translated_text","html","restartDownloadOffline","onLine","urlArray","href","split","leafNodeSection","translated_text","disableOfflineDownload","sectionCount","removeItem","cacheNames","removeAttr","messageChannel","MessageChannel","port1","onmessage","is_error","error_entity","data_cached_in_percentage","failedWalkthroughs","postMessage","port2"],"mappings":"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","file":"34.e89c84.js","sourcesContent":["/*global define*/\ndefine(['underscore',\n        'jquery',\n        'backbone',\n        '../common',\n        '../../helpers/handlebars/i18n'\n], function (_, $, Backbone, Common, translate) {\n    'use strict';\n\n    var MainView = Backbone.View.extend({\n\n        el: '#main_container',\n\n    \tevents: {\n            'click .search-categories .search-data a.search-links': 'triggerSearchGAEvent',\n            'click .offline-mode .enable': function(e){this.registerServiceWorker(e);},\n            'click .download_offline':'triggerDownloadOffline',\n            'click .offline-footer .cancel':'cancelDownloadOffline',\n            'click .restart_download': 'restartDownloadOffline',\n            'click .offline-footer .disable-offline': 'disableOfflineDownload',\n            'click .header .hidden-xs .logo, .search-categories .search-data a.search-links': function(){Common.closeSearchBox();},\n      },\n\n    \tinitialize: function () {\n            this.$(\"#search-terms\").on('keyup', {'root': this, 'common': Common}, Common.showSearchBox);\n            this.$(\"#search-label\").on('click', {'root': Common}, Common.showMobileSearchBox);\n            this.$(\".close-search-overlay, .close-search-mobile-overlay\").on('click', {'root': Common}, Common.closeSearchBox);\n            this.$(\".search-input-cancel\").on('click', {'root': Common}, Common.clearInputText);\n            this.$(\"#user-language li\").on('click', {'root': Common}, function(e){Common.changeLanguage(e)});\n            Common.hideEntities();\n    \t},\n\n\t    triggerSearchGAEvent: function(event){\n\t    \tvar linkElement = $(event.currentTarget);\n\t    \tvar searchBreadcrumb = linkElement.find('.search-breadcrumb').text();\n\t    \tif(linkElement.hasClass(\"walkthrough-entry\")) {\n                Common.triggerGAevent('Walkthrough Search', searchBreadcrumb);\n\t    \t} else {\n                Common.triggerGAevent('Section Search', searchBreadcrumb);\n\t    \t}\n\t    },\n\n         triggerDownloadOffline: function(event) {\n            var container = $('#main_container');\n            var root = this;\n            this.$('.overlay').addClass('offline-mode-active');\n            if($(container).hasClass('download-active')){\n                this.$(\".disable-offline-mode\").addClass(\"bounceInDown\");\n                setTimeout(function(){\n                    root.$(\".offline-mode\").removeClass(\"bounceInDown\");\n                }, 500);\n            }\n            else {\n                $(container).addClass('download-active');\n                this.$(\".offline-mode\").addClass(\"bounceInDown\");\n                setTimeout(function(){\n                    root.$(\".offline-mode\").removeClass(\"bounceInDown\");\n                }, 500);\n            }\n        },\n\n\n        registerServiceWorker: function(event){\n            var root = this;\n            if(navigator.serviceWorker) {\n                if(navigator.serviceWorker.controller === null){\n                    navigator.serviceWorker.register(\"/service-worker-js\", {scope: '/'}).then(function(registration) {\n                        root.localStorageTenantName = window.location.origin + '_sections'\n                        localStorage.setItem(root.localStorageTenantName, JSON.stringify(new Array))\n                        registration.installing.addEventListener('statechange', function(e) {\n                            if(e.target.state == 'activated'){\n                                console.log('ServiceWorker registration successful with scope: ', registration.scope);\n                                root.startDownloadOffline(event); \n                                root.$el.addClass('download-active');\n                            }\n                        })\n                        return navigator.serviceWorker.ready;\n                    }).catch(function(err) {\n                        // registration failed\n                        console.log('ServiceWorker registration failed: ', err);\n                        root.cancelDownloadOffline(event);\n                    });\n                }else{\n                    root.startDownloadOffline(event);\n                }\n           }else{\n                alert('Offline Mode not supported by your Browser');\n           }\n        },\n\n        unRegisterServiceWorker: function(event){\n            if ('serviceWorker' in navigator) {\n                    navigator.serviceWorker.getRegistrations().then(function(registrations) {\n                    for(var i=0; i<registrations.length;i++){\n                        if(registrations[i].scope == (window.location.origin + '/')){\n                            registrations[i].unregister();\n                            window.location.reload();\n                        }\n                    };\n                });\n            }       \n        },\n        \n        startDownloadOffline: function(event) {\n            var downloadStatus = 'downloading';\n            if(navigator.serviceWorker.controller){\n                // product tree caching \n                var productTreeDetails = Common.visit_activity\n                var product_slug = productTreeDetails.get('product');\n                var section_slug = productTreeDetails.get('section');\n                var domainPath = window.location.origin\n\n                var productTreeData =  {'prductTree': true, 'product_slug': product_slug, 'section_slug': section_slug, 'domain': domainPath}\n                this.webpageServiceWorkerCommunication(productTreeData);\n\n                var walkthroughs = localStorage.getItem('walkthroughs');             \n                if(!walkthroughs){\n                  var staticCacheData = {'is_staticAssets': true, 'domain': domainPath}\n                  this.webpageServiceWorkerCommunication(staticCacheData)\n                  var allProductsData = {'allProducts': true, 'domain': domainPath}\n                  this.webpageServiceWorkerCommunication(allProductsData);\n                  var messageData = {'section': section_slug, 'domain': domainPath, 'is_section': true, 'themeCache': true}\n                }else{\n                  var messageData = {'section': section_slug, 'domain': domainPath, 'is_section': true, 'themeCache': true}\n                }         \n                this.webpageServiceWorkerCommunication(messageData);\n                \n                localStorage.setItem('walkthroughs', true);\n                var tenantFooterImage = document.tenantFooterImage\n                var walkthroughs_list = $('.pwt-list li');\n                this.remainingWalkthroughs = walkthroughs_list.length;\n                for(var i=0; i<walkthroughs_list.length; i++){\n                    this.walkthrough_slug = walkthroughs_list[i].getAttribute('slug');\n                    // slug wise downloading function\n                    var data = {'section': section_slug, 'walkthrough': this.walkthrough_slug, 'domain': domainPath, 'is_walkthrough': true, 'tenantFooterImage': tenantFooterImage}\n                    this.webpageServiceWorkerCommunication(data);\n                }\n\n                this.localStorageCacheManagement(section_slug, 'add');\n            }\n            $('#main_container').addClass(downloadStatus);\n            // this.successPlaylistOffline();        \n            this.cancelDownloadOffline(event);\n        },\n\n        localStorageCacheManagement: function(section, action) {\n            var cacheName = window.location.origin + '_sections';\n            var sections = JSON.parse(localStorage.getItem(cacheName));\n            if (action == 'add') {\n                sections.push(section);\n            } else {\n                var index = sections.indexOf(section)\n                if (index > -1) {\n                    sections.splice(index, 1);\n                }\n            }\n            localStorage.setItem(cacheName, JSON.stringify(sections));\n            return sections.length\n        },\n\n\n        failedEntityManagement: function(entity, slug, action){\n            var cacheName = window.location.origin + '_failed_' + entity;\n            var cacheEntity = localStorage.getItem(cacheName);\n            if (!cacheEntity){\n                localStorage.setItem(cacheName, JSON.stringify(new Array))\n            }\n\n            var entityList = JSON.parse(localStorage.getItem(cacheName))\n            if(action == 'add' && entityList.indexOf(slug) == -1){\n                entityList.push(slug);\n            }\n            if (action == 'remove'){\n                var index = entityList.indexOf(slug)\n                entityList.splice(index, 1);\n            }\n            localStorage.setItem(cacheName, JSON.stringify(entityList));\n        },\n\n        cancelDownloadOffline: function(event) { \n            this.$(\".offline-mode, .disable-offline-mode\").addClass(\"bounceOutUp\");\n            var root = this;\n           \n            setTimeout(function(){\n                root.$(\".offline-mode, .disable-offline-mode\").removeClass(\"bounceOutUp\");\n                root.$(\".overlay\").removeClass('offline-mode-active');\n            }, 100);\n\n            if($(event.target).hasClass('disable-cancel') || $('#main_container').hasClass('downloading')) return;\n            $('#main_container').toggleClass('download-active');\n       },\n\n        downloadingPlaylistOffline: function(slug, progress) {\n            if(progress < 25){\n                var angle = -90 + (progress/100)*360;\n                $(\"#\"+slug+\" .animate-0-25-b\").css(\"transform\",\"rotate(\"+angle+\"deg)\");\n            }\n            else if(progress >= 25 && progress < 50){\n                var angle = -90 + ((progress-25)/100)*360;\n                $(\"#\"+slug+\" .animate-0-25-b\").css(\"transform\",\"rotate(0deg)\");\n                $(\"#\"+slug+\" .animate-25-50-b\").css(\"transform\",\"rotate(\"+angle+\"deg)\");\n            }\n            else if(progress >= 50 && progress < 75){\n                var angle = -90 + ((progress-50)/100)*360;\n                $(\"#\"+slug+\" .animate-25-50-b, #\"+slug+\" .animate-0-25-b\").css(\"transform\",\"rotate(0deg)\");\n                $(\"#\"+slug+\" .animate-50-75-b\").css(\"transform\",\"rotate(\"+angle+\"deg)\");\n            }\n            else if(progress >= 75 && progress <= 100){\n                var angle = -90 + ((progress-75)/100)*360;\n                $(\"#\"+slug+\" .animate-50-75-b, #\"+slug+\" .animate-25-50-b, #\"+slug+\" .animate-0-25-b\").css(\"transform\",\"rotate(0deg)\");\n                $(\"#\"+slug+\" .animate-75-100-b\").css(\"transform\",\"rotate(\"+angle+\"deg)\");\n\n                if(progress == 100){\n                    this.remainingWalkthroughs = this.remainingWalkthroughs - 1;\n                    if(this.remainingWalkthroughs == 0){\n                        if(!$('.downloading-slug-error').length){\n                            this.successPlaylistOffline();\n                        }\n                        else{\n                            this.errorPlaylistOffline()\n                        }\n                    }\n                }\n            }\n        },\n\n        errorPlaylistOffline: function() {\n            $('#main_container').removeClass().addClass('downloading-error');\n            $('.download_offline').removeClass().addClass('restart_download');\n            var first_translated_text = translate(\"Oops\");\n            var second_translated_text = translate(\"Try again\");\n            $('.avaiable_for_offline p').html(first_translated_text + \"! \" + second_translated_text + \":\");\n        },\n\n        restartDownloadOffline: function() {\n            if (navigator.onLine){\n                $('#main_container').removeClass().addClass('download-active downloading');\n                $('.restart_download').removeClass().addClass('download_offline');\n                $('.avaiable_for_offline p').html('available offline:');\n                var urlArray = window.location.href.split('/')\n                var leafNodeSection = urlArray[urlArray.length-1]\n                var domainPath = window.location.origin\n                var walkthroughs_list = $('.pwt-list li.downloading-slug-error');\n                this.remainingWalkthroughs = walkthroughs_list.length;\n                for(var i=0; i<walkthroughs_list.length; i++){\n                    this.walkthrough_slug = walkthroughs_list[i].getAttribute('slug');\n                    // slug wise downloading function\n                    $('#'+this.walkthrough_slug).removeClass('downloading-slug-error');\n                    this.failedEntityManagement(\"walkthroughs\", this.walkthrough_slug, 'remove');\n                    var data = {'section': leafNodeSection, 'walkthrough': this.walkthrough_slug, 'domain': domainPath, 'is_section': false, 'tenantFooterImage': tenantFooterImage, 'is_walkthrough': true}\n                    this.webpageServiceWorkerCommunication(data);\n                }\n            }else{\n                alert('No Internet Connection!!!!!');\n            }\n        },\n\n        successPlaylistOffline: function() {\n            $('#main_container').removeClass('downloading').addClass('available_offline');\n            $('.download_offline').removeClass().addClass('download_success');\n            var translated_text = translate(\"Success\");\n            $('.avaiable_for_offline p').html(translated_text + \"!\");\n            setTimeout(function() {\n                $('#main_container').addClass('download-active');\n                var translated_text = translate(\"Available offline\");\n                $('.avaiable_for_offline p').html(translated_text + \":\");\n                $('.download_success').removeClass().addClass('download_offline');\n            }, 3000);\n        },\n\n        disableOfflineDownload: function(event) {\n            $('#main_container').removeClass('available_offline');\n            this.cancelDownloadOffline(event);\n            var urlArray = window.location.href.split('/')\n            var leafNodeSection = urlArray[urlArray.length-1]\n            var domainPath = window.location.origin;\n            if(navigator.serviceWorker.controller){\n               var sectionCount = this.localStorageCacheManagement(leafNodeSection, 'remove');\n               if(sectionCount == 0){\n                  var data = {'clearCacheStorage': true}\n                  this.webpageServiceWorkerCommunication(data);\n                  localStorage.removeItem('walkthroughs');\n               } else{\n                  var cacheNames = [domainPath + '_' + leafNodeSection]\n                  var data = {'section':leafNodeSection, 'delete_section': true, 'cacheNames': cacheNames}\n                  this.webpageServiceWorkerCommunication(data);\n               }\n            }\n            $('.spiner-holder-2').removeAttr(\"style\");\n        },\n\n        webpageServiceWorkerCommunication: function(data){\n            var root = this;\n            if (navigator.serviceWorker.controller) {\n                var messageChannel = new MessageChannel();\n                messageChannel.port1.onmessage = function(event) {\n                    if(event.data.is_error){\n                        if(event.data.error_entity == 'section'){\n                            root.errorPlaylistOffline();                      \n                            $('.pwt-list li').addClass('downloading-slug-error')\n                        }else{\n                            $('#'+event.data.walkthrough_slug).addClass('downloading-slug-error');\n                            // add each slug to corresponding failed section-wise walkthroughs \n                            root.failedEntityManagement('walkthroughs', event.data.walkthrough_slug, 'add')\n                            root.downloadingPlaylistOffline(event.data.walkthrough_slug, event.data.data_cached_in_percentage);\n                        }\n                    }else{\n                        root.downloadingPlaylistOffline(event.data.slug, event.data.data_cached_in_percentage);\n                    }\n                    if(event.data.unregister){\n                        var failedWalkthroughs = window.location.origin + '_failed_walkthroughs'\n                        localStorage.removeItem(failedWalkthroughs);\n                        root.unRegisterServiceWorker(event);\n                    }\n                }\n                navigator.serviceWorker.controller.postMessage(data, [messageChannel.port2]);\n            } else {\n                console.log(\"No ServiceWorker\");\n            }\n        },\n\t});\n\n    return MainView;\n});\n"],"sourceRoot":""}