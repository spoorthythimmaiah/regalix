{"version":3,"sources":["webpack:///./sharedemos/static/js/checklist/models/checklist_item.js","webpack:///./sharedemos/static/js/checklist/models/checklist_section.js","webpack:///./sharedemos/static/js/checklist/models/checklist_suggestion.js","webpack:///./sharedemos/static/js/checklist/templates/chapter.handlebars","webpack:///./sharedemos/static/js/checklist/templates/edit.handlebars","webpack:///./sharedemos/static/js/checklist/templates/url_unfurling.handlebars","webpack:///./sharedemos/static/js/checklist/views/edit.js"],"names":["define","Backbone","ChecklistItem","Model","extend","urlRoot","Checklist","_","$","Common","ChecklistSection","ChecklistSuggestion","ProductTree","EditTemplate","PopupTemplate","ChecklistBlockTemplate","ChecklistSectionBlockTemplate","ChecklistItemBlockTemplate","ChecklistSuggestionTemplate","UrlUnfurlTemplate","ChapterTemplate","Translate","EditView","View","el","CHECKLIST_TITLE_LIMIT","CHECKLIST_DESCRIPTION_LIMIT","SECTION_TITLE_LIMIT","ITEM_TITLE_LIMIT","ITEM_DESCRIPTION_LIMIT","SUGGESTION_TITLE_LIMIT","events","updateUrl","initialize","listenTo","homeRender","checklistRender","on","e","changeLanguage","loadLanguages","document","locales","is_edit","item_name","item_description","section_id","_chapters","isEdit","hidePopup","popupName","removeClass","empty","view","addClass","attrs","add_checklist","append","root","each","checklist","edit_checklist","checklist_edit","is_disabled","hasClass","find","add_checklist_item","count","length","add_checklist_section","checklist_edit_step","checklist_edit_item","add_suggestion","checklist_edit_suggestion","children","is_external_link","initSortable","actionSuccess","setTimeout","actionInProgress","actionFailed","addSuggestionLink","event","suggestion_link_ele","externalUrl","val","trim","focus","validUrl","validateUrl","currentTarget","parent","attr","ajax","dataType","url","data","external_url","encodeURI","success","response","externalLink","desc","description","title","substring","icon","last","error","console","log","clearChapterCache","cacheChapterSuggestions","selectedChapters","map","elem","value","cacheItemInfo","browseLibrary","showPopupAttrs","tree","fetch","get_cache","author","model","loadChapters","xhr","status_code","message","searchDemos","input","toUpperCase","text","indexOf","show","hide","id","level","type","i","chapter","breadcrumb","name","slug","checked","includes","playlists","demos","buildTree","html","order","selected_categories","parent_id","canPublish","can_publish","can_publish_data","error_message","checklist_sections","checklist_items","charCounter","removeErrorMessages","maxChar","parseInt","charLength","leftChar","parents","customErrorMessage","target","remove","editToolTip","deleteEntity","entity_type","destroy","history","loadUrl","fragment","checklist_section_id","checklist_section","checklist_item_id","checklist_item","checklist_suggestion_id","checklist_suggestion","enableDisableChecklist","is_enabled","save","patch","wait","editEntity","current_event","checklistSlug","checklist_title_limit","checklist_description_limit","is_featured","checklistSectionId","section_title_limit","checklistItemId","item_title_limit","item_description_limit","preventDefault","checklistSuggestionId","suggestion_title_limit","sortable","handle","containment","update","ui","suggestion_id","item","suggestions_order","index","suggestion_data","checklistSuggestion","listSuggestions","checklist_item_elem","sortable_div_elem","before","suggestions","suggestion","suggestion_type","modifyEditedBlock","block_id","checklist_elem","items_count","path","checklist_section_elem","overlayCalc","windowHeight","window","height","css","previewChecklist","open","location","href","replace","previewImage","image","files","test","URL","createObjectURL","removeAttr","publishChecklist","alert","alert_message","checklist_data","status","removeImage","removeExternalLink","saveChecklist","checklist_object","is_edit_checklist","processData","cache","contentType","attributes","checklist_slug","undefined","saveChecklistItem","checklist_item_object","edit_checklist_item","is_edit_checklist_item","saveLinkSuggestions","saveChecklistSection","checklist_section_object","edit_checklist_section","trigger","saveEditedSuggestion","checklistSuggestionTitle","errorFlag","checklist_suggestion_data","suggestion_elem","checklistItem","suggestionType","hasSuggestions","externalLinks","totalExternalLinkEles","element","push","eq","goBack","checklist_item_title_char_count","checklist_item_desc_char_count","saveSuggestionsNewItem","saveSuggestions","showAdvanced","toggleClass","animate","scrollTop","target_class","split","reverse","isDefaultLocale","popupType","takrget","data_id","showPopup","submitChecklist","checklistTitle","checklistDescription","iconFile","checklistData","FormData","editChecklist","removeIcon","submitChecklistSection","checklistSectionTitle","checklistSectionData","editChecklistSection","checklistSection","submitChecklistItem","checklistItemTitle","checklistItemDescription","checklistItemData","editChecklistItem","switchOption","switchSuggestionType","siblings","toggleTreeContent","updateAddButtonText","suggestionsCount","updateAddStepText","steps","toString"],"mappings":"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","file":"25.19154b.js","sourcesContent":["/*global define */\ndefine([\n    'backbone'\n], function (Backbone) {\n    'use strict';\n\n    var ChecklistItem = Backbone.Model.extend({\n\n        urlRoot: \"/api/checklist-item\"\n    });\n\n    return ChecklistItem;\n});","/*global define */\ndefine([\n    'backbone'\n], function (Backbone) {\n    'use strict';\n\n    var ChecklistItem = Backbone.Model.extend({\n\n        urlRoot: \"/api/checklist-section\"\n    });\n\n    return ChecklistItem;\n});","/*global define */\ndefine([\n    'backbone'\n], function (Backbone) {\n    'use strict';\n\n    var Checklist = Backbone.Model.extend({\n        urlRoot: \"/api/checklist-suggestion\"\n   \t});\n\n    return Checklist;\n});","var Handlebars = require(\"/docker/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    return \" checked \";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"demo\\\">\\n    <div>\\n        <h1>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"name\") || (depth0 != null ? lookupProperty(depth0,\"name\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":12},\"end\":{\"line\":3,\"column\":22}}}) : helper)))\n    + \"</h1>\\n        <p>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"breadcrumb\") || (depth0 != null ? lookupProperty(depth0,\"breadcrumb\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"breadcrumb\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":11},\"end\":{\"line\":4,\"column\":27}}}) : helper)))\n    + \"</p>\\n    </div>\\n    <input id=\\\"ch-\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"slug\") || (depth0 != null ? lookupProperty(depth0,\"slug\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"slug\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":18},\"end\":{\"line\":6,\"column\":28}}}) : helper)))\n    + \"\\\" value=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"slug\") || (depth0 != null ? lookupProperty(depth0,\"slug\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"slug\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":37},\"end\":{\"line\":6,\"column\":47}}}) : helper)))\n    + \"\\\" type=\\\"checkbox\\\" class='css-checkbox' \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"checked\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":86},\"end\":{\"line\":6,\"column\":117}}})) != null ? stack1 : \"\")\n    + \">\\n    <label for=\\\"ch-\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"slug\") || (depth0 != null ? lookupProperty(depth0,\"slug\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"slug\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":19},\"end\":{\"line\":7,\"column\":29}}}) : helper)))\n    + \"\\\" class=\\\"css-label\\\"></label>\\n</div>\";\n},\"useData\":true});","var Handlebars = require(\"/docker/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    return \"\t<div class=\\\"add-block\\\" data-popup=\\\"checklist\\\">\\r\\n\t    <img src=\\\"/static/images/author/add_pathfinder.png\\\" />\\r\\n\t    <h3>\"\n    + container.escapeExpression(__default(require(\"/docker/sharedemos/static/js/helpers/handlebars/i18n.js\")).call(depth0 != null ? depth0 : (container.nullContext || {}),\"add checklist\",{\"name\":\"i18n\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":9},\"end\":{\"line\":4,\"column\":34}}}))\n    + \"</h3>\\r\\n\t</div>\\r\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var alias1=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\t<div class=\\\"add-block\\\" data-popup=\\\"checklist_section\\\" checklist_section>\\r\\n\t    <img src=\\\"/static/images/author/add_pathfinder.png\\\" />\\r\\n\t    <h3>\"\n    + alias1(__default(require(\"/docker/sharedemos/static/js/helpers/handlebars/i18n.js\")).call(depth0 != null ? depth0 : (container.nullContext || {}),\"add step\",{\"name\":\"i18n\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":11,\"column\":9},\"end\":{\"line\":11,\"column\":29}}}))\n    + \" \"\n    + alias1(container.lambda((depth0 != null ? lookupProperty(depth0,\"count\") : depth0), depth0))\n    + \"</h3>\\r\\n\t</div>\\r\\n\";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    return \"\t<div class=\\\"add-block\\\" data-popup=\\\"checklist_item\\\" checklist_item>\\r\\n\t    <img src=\\\"/static/images/author/add_pathfinder.png\\\" />\\r\\n\t    <h3>\"\n    + container.escapeExpression(__default(require(\"/docker/sharedemos/static/js/helpers/handlebars/i18n.js\")).call(depth0 != null ? depth0 : (container.nullContext || {}),\"add checklist item\",{\"name\":\"i18n\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":18,\"column\":9},\"end\":{\"line\":18,\"column\":39}}}))\n    + \"</h3>\\r\\n\t</div>\\r\\n\";\n},\"7\":function(container,depth0,helpers,partials,data) {\n    return \"\t<div class=\\\"add-block\\\" data-popup=\\\"add_suggestions\\\" checklist_suggestion>\\r\\n\t    <img src=\\\"/static/images/author/add_pathfinder.png\\\" />\\r\\n\t    <h3>\"\n    + container.escapeExpression(__default(require(\"/docker/sharedemos/static/js/helpers/handlebars/i18n.js\")).call(depth0 != null ? depth0 : (container.nullContext || {}),\"add suggestion\",{\"name\":\"i18n\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":25,\"column\":9},\"end\":{\"line\":25,\"column\":35}}}))\n    + \"</h3>\\r\\n\t</div>\\r\\n\";\n},\"9\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\t<div class=\\\"checklist-edit\\\">\\r\\n\t\t<div class=\\\"checklist-edit-wrap\\\">\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"checklist_edit\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(10, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":32,\"column\":3},\"end\":{\"line\":48,\"column\":13}}})) != null ? stack1 : \"\")\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"checklist_edit_step\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(15, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":49,\"column\":6},\"end\":{\"line\":56,\"column\":13}}})) != null ? stack1 : \"\")\n    + \"\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"checklist_edit_item\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(17, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":58,\"column\":6},\"end\":{\"line\":65,\"column\":13}}})) != null ? stack1 : \"\")\n    + \"\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"checklist_edit_suggestion\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(19, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":67,\"column\":6},\"end\":{\"line\":72,\"column\":16}}})) != null ? stack1 : \"\")\n    + \"\t\t</div>\\r\\n\t</div>\\r\\n\";\n},\"10\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\t\t        <div class=\\\"checklist-edit-option edit\\\" data-popup=\\\"checklist\\\">\\r\\n\t\t        \t\"\n    + alias2(__default(require(\"/docker/sharedemos/static/js/helpers/handlebars/i18n.js\")).call(alias1,\"edit checklist\",{\"name\":\"i18n\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":34,\"column\":11},\"end\":{\"line\":34,\"column\":37}}}))\n    + \"\\r\\n\t\t        </div>\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"is_disabled\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(11, data, 0),\"inverse\":container.program(13, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":36,\"column\":10},\"end\":{\"line\":44,\"column\":17}}})) != null ? stack1 : \"\")\n    + \"\t\t        <div class=\\\"checklist-edit-option delete\\\" data-popup=\\\"confirm_delete\\\" data-type=\\\"checklist\\\">\\r\\n\t\t        \t\"\n    + alias2(__default(require(\"/docker/sharedemos/static/js/helpers/handlebars/i18n.js\")).call(alias1,\"delete checklist\",{\"name\":\"i18n\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":46,\"column\":11},\"end\":{\"line\":46,\"column\":39}}}))\n    + \"\\r\\n\t\t        </div>\\r\\n\";\n},\"11\":function(container,depth0,helpers,partials,data) {\n    return \"\t\t\t        <div class=\\\"checklist-edit-option enable\\\" data-popup=\\\"confirm_enable\\\" data-type=\\\"checklist\\\">\\r\\n\t\t\t        \t\"\n    + container.escapeExpression(__default(require(\"/docker/sharedemos/static/js/helpers/handlebars/i18n.js\")).call(depth0 != null ? depth0 : (container.nullContext || {}),\"enable checklist\",{\"name\":\"i18n\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":38,\"column\":12},\"end\":{\"line\":38,\"column\":40}}}))\n    + \"\\r\\n\t\t\t        </div>\\r\\n\";\n},\"13\":function(container,depth0,helpers,partials,data) {\n    return \"\t\t\t        <div class=\\\"checklist-edit-option disable\\\" data-popup=\\\"confirm_disable\\\" data-type=\\\"checklist\\\">\\r\\n\t\t\t        \t\"\n    + container.escapeExpression(__default(require(\"/docker/sharedemos/static/js/helpers/handlebars/i18n.js\")).call(depth0 != null ? depth0 : (container.nullContext || {}),\"disable checklist\",{\"name\":\"i18n\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":42,\"column\":12},\"end\":{\"line\":42,\"column\":41}}}))\n    + \"\\r\\n\t\t\t        </div>\\r\\n\";\n},\"15\":function(container,depth0,helpers,partials,data) {\n    var alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.escapeExpression;\n\n  return \"\t\t        <div class=\\\"checklist-edit-option edit\\\" data-popup=\\\"checklist_section\\\">\\r\\n\t\t        \t\"\n    + alias2(__default(require(\"/docker/sharedemos/static/js/helpers/handlebars/i18n.js\")).call(alias1,\"edit checklist step\",{\"name\":\"i18n\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":51,\"column\":11},\"end\":{\"line\":51,\"column\":42}}}))\n    + \"\\r\\n\t\t        </div>\\r\\n\t\t        <div class=\\\"checklist-edit-option delete\\\" data-popup=\\\"confirm_delete\\\" data-type=\\\"checklist-step\\\">\\r\\n\t\t        \t\"\n    + alias2(__default(require(\"/docker/sharedemos/static/js/helpers/handlebars/i18n.js\")).call(alias1,\"delete checklist step\",{\"name\":\"i18n\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":54,\"column\":11},\"end\":{\"line\":54,\"column\":44}}}))\n    + \"\\r\\n\t\t        </div>\\r\\n\";\n},\"17\":function(container,depth0,helpers,partials,data) {\n    var alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.escapeExpression;\n\n  return \"\t\t        <div class=\\\"checklist-edit-option edit\\\" data-popup=\\\"checklist_item\\\">\\r\\n\t\t        \t\"\n    + alias2(__default(require(\"/docker/sharedemos/static/js/helpers/handlebars/i18n.js\")).call(alias1,\"edit checklist item\",{\"name\":\"i18n\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":60,\"column\":11},\"end\":{\"line\":60,\"column\":42}}}))\n    + \"\\r\\n\t\t        </div>\\r\\n\t\t        <div class=\\\"checklist-edit-option delete\\\" data-popup=\\\"confirm_delete\\\" data-type=\\\"checklist-item\\\">\\r\\n\t\t        \t\"\n    + alias2(__default(require(\"/docker/sharedemos/static/js/helpers/handlebars/i18n.js\")).call(alias1,\"delete checklist item\",{\"name\":\"i18n\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":63,\"column\":11},\"end\":{\"line\":63,\"column\":44}}}))\n    + \"\\r\\n\t\t        </div>\\r\\n\";\n},\"19\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"is_external_link\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(20, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":68,\"column\":4},\"end\":{\"line\":70,\"column\":11}}})) != null ? stack1 : \"\")\n    + \"\t     \t\t<div class=\\\"checklist-edit-option delete\\\" data-popup=\\\"confirm_delete\\\" data-type=\\\"suggestion\\\">\"\n    + container.escapeExpression(__default(require(\"/docker/sharedemos/static/js/helpers/handlebars/i18n.js\")).call(alias1,\"remove\",{\"name\":\"i18n\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":71,\"column\":101},\"end\":{\"line\":71,\"column\":119}}}))\n    + \"</div>\\r\\n\";\n},\"20\":function(container,depth0,helpers,partials,data) {\n    return \"\t\t\t\t\t<div class=\\\"checklist-edit-option edit\\\" data-popup=\\\"edit_suggestion\\\">\"\n    + container.escapeExpression(__default(require(\"/docker/sharedemos/static/js/helpers/handlebars/i18n.js\")).call(depth0 != null ? depth0 : (container.nullContext || {}),\"edit suggestion\",{\"name\":\"i18n\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":69,\"column\":74},\"end\":{\"line\":69,\"column\":101}}}))\n    + \"</div>\\r\\n\";\n},\"22\":function(container,depth0,helpers,partials,data) {\n    return \"\t<div class=\\\"checklist_drag\\\"></div>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"add_checklist\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":6,\"column\":7}}})) != null ? stack1 : \"\")\n    + \"\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"add_checklist_section\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(3, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":0},\"end\":{\"line\":13,\"column\":7}}})) != null ? stack1 : \"\")\n    + \"\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"add_checklist_item\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":15,\"column\":0},\"end\":{\"line\":20,\"column\":7}}})) != null ? stack1 : \"\")\n    + \"\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"add_suggestion\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(7, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":22,\"column\":0},\"end\":{\"line\":27,\"column\":7}}})) != null ? stack1 : \"\")\n    + \"\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"edit_checklist\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(9, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":29,\"column\":0},\"end\":{\"line\":75,\"column\":7}}})) != null ? stack1 : \"\")\n    + \"\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"checklist_edit_suggestion\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(22, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":77,\"column\":0},\"end\":{\"line\":79,\"column\":7}}})) != null ? stack1 : \"\");\n},\"useData\":true});","var Handlebars = require(\"/docker/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return container.escapeExpression(container.lambda((depth0 != null ? lookupProperty(depth0,\"desc\") : depth0), depth0));\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return container.escapeExpression(container.lambda(((stack1 = (depth0 != null ? lookupProperty(depth0,\"response\") : depth0)) != null ? lookupProperty(stack1,\"url\") : stack1), depth0));\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, alias3=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"url_unfurling_block\\\">\\n    <div class=\\\"thumb\\\">\\n        <img src=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"icon\") : depth0), depth0))\n    + \"\\\" />\\n    </div>\\n    <div class=\\\"info\\\">\\n        <div class=\\\"description\\\">\\n        \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias3,(depth0 != null ? lookupProperty(depth0,\"desc\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.program(3, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":8},\"end\":{\"line\":7,\"column\":59}}})) != null ? stack1 : \"\")\n    + \"\\n        </div>\\n        <div class=\\\"link\\\">\\n            \"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"response\") : depth0)) != null ? lookupProperty(stack1,\"url\") : stack1), depth0))\n    + \"\\n        </div>\\n        <div class=\\\"remove\\\">\"\n    + alias2(__default(require(\"/docker/sharedemos/static/js/helpers/handlebars/i18n.js\")).call(alias3,\"remove link\",{\"name\":\"i18n\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":12,\"column\":28},\"end\":{\"line\":12,\"column\":51}}}))\n    + \"</div>\\n    </div>\\n</div>\";\n},\"useData\":true});","/*global define*/\ndefine(['underscore',\n        'jquery',\n        'backbone',\n        '../../tenant/common',\n        '../models/checklist',\n        '../models/checklist_section',\n        '../models/checklist_item',\n        '../models/checklist_suggestion',\n        '../../tenant/models/product-tree',\n        '../templates/edit.handlebars',\n        '../templates/popup.handlebars',\n        '../templates/checklist_block.handlebars',\n        '../templates/checklist_section.handlebars',\n        '../templates/checklist_item.handlebars',\n        '../templates/checklist_suggestion.handlebars',\n        '../templates/url_unfurling.handlebars',\n        '../templates/chapter.handlebars',\n        '../../helpers/handlebars/i18n',\n], function (_, $, Backbone, Common, Checklist, ChecklistSection, ChecklistItem, ChecklistSuggestion, ProductTree, EditTemplate, PopupTemplate, ChecklistBlockTemplate, ChecklistSectionBlockTemplate, ChecklistItemBlockTemplate, ChecklistSuggestionTemplate, UrlUnfurlTemplate, ChapterTemplate,Translate) {\n    'use strict';\n\n    var EditView = Backbone.View.extend({\n\n        el: '#main_container',\n        CHECKLIST_TITLE_LIMIT: 200,\n        CHECKLIST_DESCRIPTION_LIMIT: 500,\n        SECTION_TITLE_LIMIT: 50,\n        ITEM_TITLE_LIMIT: 100,\n        ITEM_DESCRIPTION_LIMIT: 350,\n        SUGGESTION_TITLE_LIMIT: 200,\n\n        events: {\n            'click .preview' : 'previewChecklist',\n            'click .add-block:not(.disabled)': 'showPopupAttrs',\n            'click .popup-title .back': 'goBack',\n            'click .cancel': 'hidePopup',\n            'click .option-check': 'switchOption',\n            'click .advanced': 'showAdvanced',\n            'change #upload-file': 'previewImage',\n            'click .remove-file': 'removeImage',\n            'keyup .content-block textarea, .content-block input' : 'charCounter',\n            'click .popup-box[data-popup=\"checklist\"] .save': 'submitChecklist',\n            'click .popup-box[data-popup=\"checklist_section\"] .save': 'submitChecklistSection',\n            'click .popup-box[data-popup=\"checklist_item\"] .save': 'submitChecklistItem',\n            'click .popup-box[data-popup=\"checklist_suggestion\"] .save': 'saveSuggestions',\n            'click .popup-box[data-popup=\"edit_suggestion\"] .save': 'saveEditedSuggestion',\n            'keyup .popup-box[data-popup=\"checklist_suggestion\"] input[name=\"search\"]': 'searchDemos',\n\n            'click .checklist-edit-option.edit' : 'editEntity',\n            'click .confirm-delete': 'deleteEntity',\n            'click .confirm-enable, .confirm-disable' : 'enableDisableChecklist',\n           \n            'click .checklist-edit-option.delete' : 'showPopupAttrs',\n            'click .checklist-edit-option.enable, .checklist-edit-option.disable' : 'showPopupAttrs',\n\n            'click .publish-checklist:not(.disabled)': 'showPopupAttrs',\n            'click .confirm-publish-checklist': 'publishChecklist',\n\n            'click .content_suggestion:not(.disabled) .browse' : 'browseLibrary',\n            'click .content_suggestion:not(.disabled) .add_suggestion_link' : 'addSuggestionLink',\n            'click .remove': 'removeExternalLink',\n            'click .demo .css-checkbox': 'updateAddButtonText',\n            'click #site_map .category': 'toggleTreeContent',\n            'keyup input[type=url]': Common.updateUrl,\n            'change .suggetsion_type .css-radio': 'switchSuggestionType',\n        },\n\n        initialize: function() {\n            this.listenTo(Backbone, 'home_rendered', this.homeRender);\n            this.listenTo(Backbone, 'checklist_rendered', this.checklistRender);\n            this.$(\"#user-language li\").on('click', {'root': Common}, function(e){Common.changeLanguage(e)});\n            Common.loadLanguages(document.locales);\n            this.is_edit = false;\n            this.item_name;\n            this.item_description;\n            this.section_id;\n            this._chapters = [];\n            if(document.isEdit){\n                this.is_edit = true;\n            }\n        },\n\n        hidePopup: function(popupName){\n            this.$('.popup-overlay').removeClass('active');\n            this.$('.popup-wrap').empty();\n        },\n\n        homeRender : function(view){\n            this.$('.preview').addClass('disable');\n            this.$('.publish-checklist').addClass('disabled');\n            this.view = view;\n            var attrs = {};\n            attrs.add_checklist = true;\n            this.$('.checklist_list').append(EditTemplate(attrs));\n            attrs = {};\n            var root = this;\n            _.each(this.$('.checklist_list ul li'), function(checklist){\n                attrs.edit_checklist = true;\n                attrs.checklist_edit = true;\n                attrs.is_disabled = root.$(checklist).hasClass('disabled');\n                root.$(checklist).find('.checklist_wrap').append(EditTemplate(attrs));\n            })\n        },\n\n        checklistRender : function(view){\n            this.$('.preview').removeClass('disable');\n            this.$('.publish-checklist').removeClass('disabled');\n            var attrs = {};\n            attrs.add_checklist_item = true;\n            this.$('.checklist_section').append(EditTemplate(attrs));\n            attrs = {};\n            attrs.count = this.$('.checklist_step_wrap .checklist_section').length + 1\n            attrs.add_checklist_section= true;\n            this.$('.checklist_wrap').append(EditTemplate(attrs));\n            attrs = {};\n            attrs.edit_checklist = true;\n            attrs.checklist_edit_step = true;\n            this.$('.steps_title').append(EditTemplate(attrs));\n            attrs = {};\n            attrs.edit_checklist = true;\n            attrs.checklist_edit_item = true;\n            this.$('.checklist_item .head').append(EditTemplate(attrs));\n            attrs = {};\n            attrs.add_suggestion = true;\n            this.$('.checklist_item .info_block').append(EditTemplate(attrs));\n            attrs = {};\n            attrs.edit_checklist = true;\n            attrs.checklist_edit_suggestion = true;\n            this.$('.suggested_content_wrap[data-type=\"walkthrough\"]').children('.suggested_content').append(EditTemplate(attrs));\n            attrs.is_external_link = true;\n            this.$('.suggested_content_wrap[data-type=\"external_link\"]').children('.suggested_content').append(EditTemplate(attrs));\n            this.initSortable();\n        },\n\n        actionSuccess: function(){\n            var root = this;\n            setTimeout(function(){\n                root.$('.form-sending').removeClass(\"slide-in is-submitted\");\n                root.$('.form-sent').addClass(\"slide-in\");\n                setTimeout(function(){\n                    root.$('.form-sent').removeClass(\"slide-in\");\n                }, 1000);\n            },1000)\n        },\n\n        actionInProgress: function(){\n            this.$('.form-sending').addClass(\"slide-in is-submitted\");\n        },\n\n        actionFailed: function(){\n            var root = this;\n            setTimeout(function(){\n                root.$('.form-sending').removeClass(\"slide-in is-submitted\");\n                root.$('.form-failed').addClass(\"slide-in\");\n                setTimeout(function(){\n                    root.$('.form-failed').removeClass(\"slide-in\");\n                }, 1000);\n            }, 1000);\n        },\n\n        addSuggestionLink: function(event){\n            var root = this;\n            root.$('.save').addClass('disabled');\n            var suggestion_link_ele = this.$('.suggestion_link');\n            suggestion_link_ele.removeClass('error');\n            var externalUrl = suggestion_link_ele.val().trim();\n            if(!externalUrl){\n                suggestion_link_ele.addClass('error');\n                suggestion_link_ele.focus();\n                return;\n            }\n            var validUrl = Common.validateUrl(externalUrl);\n            if (!validUrl) {\n                suggestion_link_ele.addClass('error');\n                suggestion_link_ele.focus();\n                return;\n            }\n\n            this.$(event.currentTarget).parent().addClass('loading');\n\n            this.$('#link_chapter').attr('disabled', true);\n            Backbone.ajax({\n                dataType: \"json\",\n                url: \"/url-unfurl\",\n                data: {external_url: encodeURI(externalUrl)},\n                success: function (response) {\n                    var externalLink = {}\n                    externalLink.response = response\n                    externalLink.desc = response.description;\n                    if(!externalLink.desc){\n                        externalLink.desc = response.title;\n                    }\n                    if(externalLink.desc && externalLink.desc.length > 100){\n                        externalLink.desc = externalLink.desc.substring(0, 101) + '...';\n                    }\n                    if (!response.icon){\n                        externalLink.icon = '/static/images/default_link_icon.png';\n                    }else{\n                        externalLink.icon = response.icon;\n                    }\n                    root.$('.save').removeClass('disabled');\n                    root.$(event.currentTarget).parent().removeClass('loading')\n                    root.$('.suggestion_link').val('');\n                    root.$('.external-links').append(UrlUnfurlTemplate(externalLink))\n                    root.$('.url_unfurling_block').last().data('response', response);\n                },\n                error: function(error){\n                    root.$(event.currentTarget).parent().removeClass('loading')\n                    console.log(error)\n                    suggestion_link_ele.addClass('error');\n                    suggestion_link_ele.focus();\n                }\n            })\n        },\n\n        clearChapterCache: function(){\n            this._chapters = [];\n        },\n\n        cacheChapterSuggestions: function(event){\n            var selectedChapters = this.$('.css-checkbox:checked');\n            this._chapters = _.map(selectedChapters, function(elem){return elem.value;});\n        },\n\n        cacheItemInfo: function(event){\n            this.item_name =  this.$('.popup-box [name=title]').val();\n            this.item_description = this.$('.popup-box [name=description]').val();\n            this.section_id = this.$('.popup-box .save').attr('section-id');\n        },\n\n        browseLibrary: function(event){\n\n            this.cacheItemInfo(event);\n\n            this.showPopupAttrs(event);\n            var root = this;\n            var tree = new ProductTree();\n            tree.fetch({\n                data: {get_cache: 'False', author: 1},\n                success: function(model, response){\n                    root.loadChapters(response, \"demo-library\", 0, \"section\", \"\");\n                },\n                error: function(xhr, status_code, message){\n                    console.log(\"tree fetch error:\", xhr, status_code, message)\n                }\n            });\n        },\n\n        searchDemos: function(){\n            var input = $(\"input[name='search']\").val().toUpperCase();\n            $('#demo-library').children().each( function () {\n               if( $(this).find('h1').text().toUpperCase().indexOf(input) > -1){\n                   $(this).show();\n               } else {\n                   $(this).hide();\n               }\n            });\n        },\n\n        loadChapters: function(data, id, level, type, parent){\n            var root = this;\n\n            level += 1;\n\n            for (var i =0; i < data.length; i++) {\n                var chapter = {};\n                chapter.breadcrumb = '';\n                if(parent != ''){\n                        chapter.breadcrumb = parent + ' > ' + data[i].name;\n                    } else{\n                        chapter.breadcrumb = data[i].name;\n                    }\n                if (type == \"demo\") {\n                    chapter.slug = data[i].slug;\n                    chapter.name = data[i].name;\n                    chapter.checked = false;\n                    if(root._chapters.includes(chapter.slug)){ chapter.checked = true }\n                    $('#' + id).append(ChapterTemplate(chapter));\n                }\n\n                if (data[i].children) {\n                    root.loadChapters(data[i].children, id, level, \"section\", chapter.breadcrumb)\n                } else if (data[i].playlists) {\n                    root.loadChapters(data[i].playlists, id, level, \"playlists\", chapter.breadcrumb)\n                } else if (data[i].demos) {\n                    root.loadChapters(data[i].demos, id, level, \"demo\", chapter.breadcrumb)\n                }\n            }\n        },\n\n        buildTree: function(data, id, level, type){\n            var root = this;\n            level += 1;\n            for (var i = 0; i < data.length; i++) {\n                if (type == \"section\") {\n                    var html = \"<div id=\" + data[i].slug + \" data-item='section' class='category-list level\" + level + \"'>\\\n                                    <div class='category closed'>\\\n                                        <span class='icon'></span>\" + data[i].name +\"\\\n                                    </div>\\\n                                </div>\"\n                } else if(type == \"playlists\"){\n                    var html = \"<div id='\" + id + \"-\" + level + \"-\" + data[i].order + \"' data-item='playlist' class='category-list level\" + level + \"'>\\\n                                    <div class='playlist'><span class='icon'></span>\" + data[i].name + \"</div>\\\n                                </div>\"\n                } else {\n                    var input;\n                    if(_.indexOf(root.selected_categories, data[i].slug) !== -1){\n                        input = \"<input type='checkbox' id=\" + \"ch-\" + data[i].slug + \" value=\"+ data[i].slug +\" class='css-checkbox' checked/>\"\n                    }else{\n                        input = \"<input type='checkbox' id=\" + \"ch-\" + data[i].slug + \" value=\"+ data[i].slug +\" class='css-checkbox' />\"\n                    }\n                    var html = \"<div class='category-list level\" + level + \"' data-item='chapter'>\\\n                                    <div class='demo'><span class='icon'></span>\" + data[i].name + input +\"\\\n                                            <label for='ch-\" + data[i].slug + \"' class='css-label'></label>\\\n                                </div>\"\n                };\n                $('#' + id).append(html);\n                var parent_id;\n                if(data[i].children){\n                    parent_id = data[i].slug;\n                    root.buildTree(data[i].children, parent_id, level, \"section\")\n                } else if (data[i].playlists){\n                    parent_id = data[i].slug;\n                    root.buildTree(data[i].playlists, parent_id, level, \"playlists\")\n                }else if (data[i].demos) {\n                    parent_id = id + '-' + level + '-' + data[i].order;\n                    root.buildTree(data[i].demos, parent_id, level, \"demo\")\n               };\n            }\n        },\n\n        canPublish: function(){\n            var root = this;\n            var can_publish = true;\n            var can_publish_data = {};\n            var error_message;\n            var checklist_sections = this.$('.checklist_section');\n\n            if (checklist_sections.length == 0){\n                can_publish = false;\n                return can_publish;\n            }\n\n            $(checklist_sections).each(function(){\n                var checklist_items = root.$(this).children('.checklist_item');\n                if(checklist_items.length == 0){\n                    can_publish = false;\n                    return can_publish;\n                }\n            });\n\n            return can_publish;\n        },\n\n        charCounter: function(event){\n            this.removeErrorMessages();\n            var maxChar = parseInt(this.$(event.currentTarget).attr('maxlength'));\n            var charLength = this.$(event.currentTarget).val().length;\n            if ( charLength <= maxChar) {\n                var leftChar = maxChar - this.$(event.currentTarget).val().length;\n                this.$(event.currentTarget).parents('.block').find('.counter').text(leftChar + \" characters left\");\n            }\n        },\n\n        customErrorMessage: function(message, target, elem){\n            this.$('.edit-tool-tip').remove();\n            var editToolTip = '<div class=\"edit-tool-tip\">'+message+'</div>';\n            target.append(editToolTip);\n            if(elem) elem.addClass('error');\n        },\n\n\n        deleteEntity: function(event){\n            var root = this;\n            var entity_type = this.$(event.currentTarget).attr('data-type');\n            this.actionInProgress();\n            if(entity_type == 'checklist'){\n                var slug = this.$(event.target).attr('data-checklist-slug');\n                var checklist = new Checklist({id: slug});\n\n                checklist.destroy({\n                    success: function(){\n                        root.actionSuccess();\n\n                        setTimeout(function(){\n                            root.hidePopup();\n                            Backbone.history.loadUrl(Backbone.history.fragment);\n                        }, 2000);\n                    },\n                    error: function(response){\n                        root.actionFailed();\n                        setTimeout(function(){\n                            root.hidePopup();\n                        }, 2000);\n                    }\n                })\n            }else if(entity_type == 'checklist step'){\n                var checklist_section_id = this.$(event.currentTarget).attr('data-section-id');\n                var checklist_section = new ChecklistSection({id: checklist_section_id});\n\n                checklist_section.destroy({\n                    success: function(){\n                        root.actionSuccess();\n\n                        setTimeout(function(){\n                            root.hidePopup();\n                            Backbone.history.loadUrl(Backbone.history.fragment);\n                        }, 2000);\n\n                    },\n                    error: function(response){\n                        root.actionFailed();\n                        setTimeout(function(){\n                            root.hidePopup();\n                        }, 2000);\n                    }\n                })\n            }else if(entity_type == 'checklist item'){\n                var checklist_item_id = this.$(event.currentTarget).attr('data-item-id');\n                var checklist_item = new ChecklistItem({id: checklist_item_id });\n\n                checklist_item.destroy({\n                    success: function(){\n                        root.actionSuccess();\n\n                        setTimeout(function(){\n                            root.hidePopup();\n                            Backbone.history.loadUrl(Backbone.history.fragment);\n                        }, 2000);\n                    },\n                    error: function(response){\n                        root.actionFailed();\n                        setTimeout(function(){\n                            root.hidePopup();\n                        }, 2000);\n                    }\n                })\n            }else{\n                var checklist_suggestion_id = this.$(event.currentTarget).attr('data-suggestion-id');\n                var checklist_suggestion = new ChecklistSuggestion({id: checklist_suggestion_id });\n\n                checklist_suggestion.destroy({\n                    success: function(){\n                        root.actionSuccess();\n\n                        setTimeout(function(){\n                            root.hidePopup();\n                            Backbone.history.loadUrl(Backbone.history.fragment);\n                        }, 2000);\n                    },\n                    error: function(response){\n                        root.actionFailed();\n                        setTimeout(function(){\n                            root.hidePopup();\n                        }, 2000);\n                    }\n                })\n            }\n        },\n\n\n        enableDisableChecklist: function(event){ \n            var slug = this.$(event.currentTarget).attr('data-checklist-slug');\n            var is_enabled = this.$(event.currentTarget).hasClass('enable')\n\n            this.actionInProgress();\n\n            var checklist = new Checklist({'id': slug, 'is_enabled': is_enabled});\n            var root = this;\n            checklist.save(null, {\n                patch: true,\n                wait: true,\n                success:function(response){\n                    root.actionSuccess();\n                    setTimeout(function(){\n                        root.hidePopup();\n                        Backbone.history.loadUrl(Backbone.history.fragment);\n                    }, 2000);\n                },\n                error:function(xhr, status_code, error_message){\n                    root.actionFailed();\n                }\n            });\n        },\n\n        editEntity: function(event){\n            var popupName = this.$(event.currentTarget).attr('data-popup');\n            var current_event = event;\n            var attrs = {};\n            attrs[popupName]= true;\n            var root = this;\n            root.cacheChapterSuggestions(event);\n            if(popupName == \"checklist\"){\n                var checklistSlug = root.$(event.target).parents('li').attr('data-checklist-slug');\n                var checklist = new Checklist({'id': checklistSlug});\n                checklist.fetch({\n                    success: function(model, response){\n                        root.showPopupAttrs(current_event);\n                        root.$('.popup-box').attr('edit_checklist', true);\n\n                        root.$('.popup-box [name=title]').val(response.title);\n                        var checklist_title_limit = root.CHECKLIST_TITLE_LIMIT - response.title.length;\n                        root.$('#checklist_title_counter').html(checklist_title_limit + \" \" + Translate(\"characters left\"));\n\n                        root.$('.popup-box [name=description]').val(response.description);\n                        var checklist_description_limit = root.CHECKLIST_DESCRIPTION_LIMIT - response.description.length;\n                        root.$('#checklist_desc_counter').html(checklist_description_limit + \" \" + Translate(\"characters left\"));\n\n                        root.$('#featured .option-check').removeClass('active');\n                        if(response.is_featured){\n                            root.$('#featured .option-check:contains(\"yes\")').addClass('active');\n                        }else{\n                            root.$('#featured .option-check:contains(\"no\")').addClass('active');\n                        }\n\n                        if(response.icon && response.icon.url){\n                            root.$('.popup-box .file-name').text(response.icon.name);\n                            root.$('.popup-box .img-preview').attr('src', response.icon.url);\n                            root.$('.popup-box .block:last-child').addClass('image-added');\n                        }\n                    }\n                })\n            }else if(popupName == 'checklist_section'){\n                var checklistSectionId = root.$(event.target).parents('.checklist_section').attr('data-id');\n                var checklist_section = new ChecklistSection({'id': parseInt(checklistSectionId)});\n                checklist_section.fetch({\n                    success: function(model, response){\n                        root.showPopupAttrs(current_event);\n                        root.$('.popup-box').attr('edit_checklist_section', true);\n                        \n                        root.$('.popup-box [name=name]').val(response.title);\n                        var section_title_limit = root.SECTION_TITLE_LIMIT - response.title.length;\n                        root.$('#checklist_section_title_counter').html(section_title_limit + \" \" + Translate(\"characters left\"));\n                    }\n                })\n            }else if(popupName == 'checklist_item'){\n\n                var checklistItemId = root.$(event.target).parents('.checklist_item').attr('data-id') || root.$(event.target).attr('data-id') ;\n                if(parseInt(checklistItemId)){\n                    var checklist_item = new ChecklistItem({'id': parseInt(checklistItemId)});\n                    checklist_item.fetch({\n                        success: function (model, response) {\n                           root.showPopupAttrs(current_event);\n                           root.$('.popup-box').attr('edit_checklist_item', true);\n\n                           root.$('.popup-box [name=title]').val(response.title);\n                           var item_title_limit = root.ITEM_TITLE_LIMIT - response.title.length;\n                           root.$('#checklist_item_title_counter').html(item_title_limit + \" \" + Translate(\"characters left\"));\n\n                           root.$('.popup-box [name=description]').val(response.description);\n                           var item_description_limit = root.ITEM_DESCRIPTION_LIMIT - response.description.length;\n                           root.$('#checklist_desc_counter').html(item_description_limit + \" \" + Translate(\"characters left\"));\n                       }\n                   })\n                } else {\n                   root.showPopupAttrs(current_event);\n                   root.$('.popup-box').attr('edit_checklist_item', false);\n\n                   root.$('.popup-box [name=title]').val(root.item_name);\n                   var item_title_limit = root.ITEM_TITLE_LIMIT - root.item_name.length;\n                   root.$('#checklist_item_title_counter').html(item_title_limit + \" \" + Translate(\"characters left\"));\n\n                   root.$('.popup-box [name=description]').val(root.item_description);\n                   var item_description_limit = root.ITEM_DESCRIPTION_LIMIT - this.item_description.length;\n                   root.$('#checklist_desc_counter').html(item_description_limit + \" \" + Translate(\"characters left\"));\n\n                   root.$('.popup-box .selected_chapters').html(root._chapters.length + \" \" + Translate(\"chapter selected\"));\n               }\n            }else{\n                event.preventDefault();\n                var checklistSuggestionId = root.$(event.target).parents('.suggested_content_wrap').attr('data-id');\n                var checklist_suggestion = new ChecklistSuggestion({'id': parseInt(checklistSuggestionId)});\n                checklist_suggestion.fetch({\n                    success: function(model, response){\n                        root.showPopupAttrs(current_event);\n                        root.$('.popup-box').attr('edit_checklist_suggestion', true);\n\n                        root.$('.popup-box [name=title]').val(response.title);\n                        var suggestion_title_limit = root.SUGGESTION_TITLE_LIMIT - response.title.length;\n                        root.$('#checklist_sugg_title_counter').html(suggestion_title_limit + \" \" + Translate(\"characters left\"));\n                    }\n                })\n            }\n        },\n\n        initSortable: function(event) {\n            this.$(\".sortable-wrap\").sortable({\n                handle: \".checklist_drag\",\n                containment: \"parent\",\n                update: function(event, ui){\n                    var suggestion_id = ui.item.attr('data-id');\n                    var suggestions_order = {};\n\n                    $(ui.item[0]).parents('.info_block').children('.sortable-wrap').children('.suggested_content_wrap').each(function(index){\n                        var suggestion_id = 'suggestion_' + $(this).attr('data-id');\n                        var index = parseInt(index + 1);\n                        suggestions_order[suggestion_id] = index;\n                    });\n\n                    var suggestion_data = {\n                        'id' : suggestion_id,\n                        'suggestions_order' : suggestions_order,\n                        'reorder' : true\n                    };\n\n                    var checklistSuggestion = new ChecklistSuggestion(suggestion_data);\n\n                    checklistSuggestion.save(null, { patch: true});\n                }\n            });\n        },\n\n        listSuggestions: function(checklist_item){\n            var root = this;\n            var is_edit = this.is_edit;\n            var checklist_item_elem = $('#item_' + checklist_item.checklist_item_id + ' .sortable-wrap');\n            if(checklist_item_elem.length == 0){\n                var sortable_div_elem = '<div class=\"suggestions_title\">SUGGESTED CONTENT : </div>' +\n                                        '<div class=\"sortable-wrap ui-sortable\"></div>';\n                 $('#item_' + checklist_item.checklist_item_id).children('.add-block').before(sortable_div_elem);\n            }\n\n            $('#item_' + checklist_item.checklist_item_id + ' .sortable-wrap').children('.suggested_content_wrap').remove();\n            _.each(checklist_item.suggestions, function(suggestion, index) {\n                root.$('#item_' + checklist_item.checklist_item_id + ' .sortable-wrap').append(ChecklistSuggestionTemplate({\"suggestion\" : suggestion, 'is_edit': is_edit}));\n                var attrs = {};\n                attrs.edit_checklist = true;\n                attrs.checklist_edit_suggestion = true;\n                if(suggestion.suggestion_type == 'external_link'){\n                    attrs.is_external_link = true;\n                }\n                root.$('.suggested_content_wrap[data-id=\"' + suggestion.suggestion_id + '\"] .suggested_content').append(EditTemplate(attrs));\n                root.initSortable();\n            });\n        },\n\n        modifyEditedBlock: function(entity_type, block_id, response){\n            if(entity_type == 'checklist'){\n                var checklist_elem = $('li[data-checklist-slug=\"' + block_id + '\"]').children('.checklist_wrap');\n\n                this.$(checklist_elem).children('.banner').children('label').html(response.title);\n\n                this.$(checklist_elem).children('.info_block').children('.title').html(response.title);\n                this.$(checklist_elem).children('.info_block').children('.description').html(response.description);\n                this.$(checklist_elem).children('.info_block').children('.explore').attr('data-slug', response.slug);\n\n                this.$(checklist_elem).children('.footer').children('.description').html(response.description);\n                this.$(checklist_elem).children('.footer').children('.counts').html(response.items_count + ' Checks');\n\n                if(response.icon){\n                    this.$(checklist_elem).children('.banner').children('img').attr('src', '/static/media/' + response.icon.path);\n                }else{\n                    this.$(checklist_elem).children('.banner').children('img').attr('src', '/static/images/checklist-banner1.png');\n                }\n\n                this.$(checklist_elem).parents('li').attr('data-checklist-slug', response.slug);\n            }else if(entity_type == 'checklist_section'){\n                var checklist_section_elem = $('.checklist_section[data-id=\"' + block_id + '\"]');\n\n                this.$(checklist_section_elem).children('.steps_title').children('.title').html(response.title);\n            }else{\n                var checklist_item_elem = $('.checklist_item[data-id=\"' + block_id + '\"]');\n\n                this.$(checklist_item_elem).children('.head').children('.title').html(response.title);\n                this.$(checklist_item_elem).children('.info_block').children('.text').html(response.description);\n            }\n        },\n\n        overlayCalc: function(){\n            var windowHeight = $(window).height() - 200;\n            this.$('.popup-box .content-block').css({\"max-height\": windowHeight});\n        },\n\n        previewChecklist: function(event){\n            window.open(window.location.href.replace('edit', 'preview'),'_blank')\n        },\n\n        previewImage: function(event){\n            this.removeErrorMessages();\n            var image = event.target.files[0];\n            if (!image || !(/\\.(gif|jpg|jpeg|tiff|png)$/i).test(image.name)) {\n                return false;\n            }\n            this.$(event.currentTarget).parents('.block').find('.file-name').text(image.name);\n            this.$('.img-preview').attr('src', URL.createObjectURL(image)).removeAttr('data-remove');\n            this.$(event.currentTarget).parents('.block').addClass('image-added');\n        },\n\n        publishChecklist: function(event){\n            var root = this;\n            var can_publish = this.canPublish();\n\n            if (!can_publish) {\n                this.hidePopup();\n                var attrs = {};\n                attrs.alert = true;\n                attrs.alert_message =  'One or More Steps are not completed';\n                this.$('.popup-overlay .popup-wrap').html(PopupTemplate(attrs));\n                this.$('.popup-overlay').addClass('active');\n                this.overlayCalc();\n                return;\n            }\n            this.actionInProgress();\n            var checklist_data = {\n                'id' : $('.checklist_header').attr('data-id'),\n                'publish' : true\n            }\n            this.checklist = new Checklist(checklist_data);\n            setTimeout(function(){\n                root.checklist.save(null, {\n                    patch: true,\n                    success: function(response, xhr, status){\n                        root.actionSuccess();\n                        setTimeout(function(){\n                            root.hidePopup();\n                            Backbone.history.loadUrl(Backbone.history.fragment);\n                        }, 2000);\n                    }, error: function(response){\n                        root.actionFailed();\n                        setTimeout(function(){\n                            root.hidePopup();\n                        }, 2000);\n                    }\n                })\n            }, 1000);\n        },\n\n        removeErrorMessages: function(){\n            this.$('.edit-tool-tip').remove();\n            this.$('input, textarea').removeClass('error')\n        },\n\n        removeImage: function(event){\n            this.$(event.currentTarget).parents('.block').removeClass('image-added');\n            this.$('.img-preview').removeAttr('src').removeAttr('style').attr('data-remove', true);\n            this.$('.upload-file').val('');\n        },\n\n        removeExternalLink: function(e){\n            this.$(e.currentTarget).parents('.url_unfurling_block').remove()\n            if(this.$('.url_unfurling_block').length == 0){\n                this.$('#link_chapter').attr('disabled', false);\n            }\n        },\n\n        saveChecklist: function(checklist_data, checklist_object, edit_checklist){\n            var root = this;\n            this.is_edit_checklist = edit_checklist;\n\n            this.checklist = checklist_object;\n            setTimeout(function(){\n                root.checklist.save(\n                    null, {\n                        processData: false,\n                        cache: false,\n                        contentType: false,\n                        data: checklist_data,\n                        success: function(response){\n                            root.actionSuccess();\n\n                            var response = response.attributes;\n                            var checklist_slug = response.slug;\n\n                            if(root.is_edit_checklist == undefined){\n                                root.$('ul.checklists.featured_list').append(ChecklistBlockTemplate({'checklist' : response, 'is_edit' : true}));\n\n                                var attrs = {};\n                                attrs.edit_checklist = true;\n                                attrs.checklist_edit = true;\n                                root.$('li[data-checklist-slug=\"' + checklist_slug + '\"] .checklist_wrap').append(EditTemplate(attrs));\n                            }else{\n                                root.modifyEditedBlock('checklist', response.id, response);\n                            }\n\n                            setTimeout(function(){\n                                root.hidePopup();\n                                Backbone.history.loadUrl(Backbone.history.fragment);\n                            }, 2000);\n                        }, error: function(response){\n                            root.actionFailed();\n                            setTimeout(function(){\n                                root.hidePopup();\n                            }, 2000);\n                        }\n                    }\n                )\n            }, 1000);\n        },\n\n        saveChecklistItem: function(checklist_item_object, edit_checklist_item, checklist_section_id){\n            var root = this;\n            this.is_edit_checklist_item = edit_checklist_item;\n            this.checklist_section_id = checklist_section_id;\n            this.checklist_item = checklist_item_object;\n\n            setTimeout(function(){\n                root.checklist_item.save(null, {\n                        success: function(response){\n                            root.actionSuccess();\n\n                            var response = response.attributes;\n                            var checklist_item_id = response.checklist_item_id;\n\n                            if(root.is_edit_checklist_item == undefined){\n                                var attrs = {};\n                                attrs.checklist_item = response;\n                                var checklist_section_elem = root.$('.checklist_section[data-id=\"' + root.checklist_section_id + '\"]');\n                                root.$(checklist_section_elem).children('.add-block').before(ChecklistItemBlockTemplate(attrs));\n                                \n                                attrs = {};\n                                attrs.edit_checklist = true;\n                                attrs.checklist_edit_item = true;\n                                root.$(checklist_section_elem).children('.checklist_item[data-id=\"' + checklist_item_id + '\"]').children('.head').append(EditTemplate(attrs));\n                                attrs = {};\n                                attrs.add_suggestion = true;\n                                root.$(checklist_section_elem).children('.checklist_item[data-id=\"' + checklist_item_id + '\"]').children('.info_block').append(EditTemplate(attrs));\n                                root.saveLinkSuggestions(checklist_item_id);\n                            }else{\n                                root.modifyEditedBlock('checklist_item', response.id, response);\n                            }\n\n                            setTimeout(function(){\n                                root.hidePopup();\n                                Backbone.history.loadUrl(Backbone.history.fragment);\n                            }, 2000);\n                        }, error: function(response){\n                            root.actionFailed();\n                            setTimeout(function(){\n                                root.hidePopup();\n                            }, 2000);\n                        }\n                    }\n                )\n            }, 1000);\n        },\n\n        saveChecklistSection: function(checklist_section_object, edit_checklist_section){\n            var root = this;\n\n            setTimeout(function(){\n                checklist_section_object.save( null, {\n                        success: function(response){\n                            root.actionSuccess();\n                            setTimeout(function(){\n                                root.hidePopup();\n                                Backbone.history.loadUrl(Backbone.history.fragment);\n                                Backbone.trigger(\"checklist_rendered\", root);\n                            }, 2000);\n                        }, error: function(response){\n                            root.actionFailed();\n                            setTimeout(function(){\n                                root.hidePopup();\n                            }, 2000);\n                        }\n                    }\n                )\n            }, 1000);\n        },\n\n        saveEditedSuggestion: function(event){\n            var root = this;\n            var checklistSuggestionId = this.$(event.target).attr('data-id');\n            var checklistSuggestionTitle = this.$('textarea[name=\"title\"]');\n\n            var errorFlag = false;\n            if (!checklistSuggestionTitle.val()) {\n                this.customErrorMessage('Provide a title for the suggestion', this.$(checklistSuggestionTitle).parent(), this.$(checklistSuggestionTitle));\n                errorFlag = true;\n            }\n\n            if (errorFlag) return false;\n\n            var checklist_suggestion_data = {\n                'id': checklistSuggestionId,\n                'title': checklistSuggestionTitle.val()\n            }\n\n            var checklist_suggestion = new ChecklistSuggestion(checklist_suggestion_data);\n            this.actionInProgress();\n\n            setTimeout(function(){\n                checklist_suggestion.save(null, {\n                        success: function(response){\n                            root.actionSuccess();\n\n                            var response = response.attributes;\n\n                            var suggestion_elem = root.$('.suggested_content_wrap[data-id=\"' + response.id + '\"]').children('.suggested_content');\n                            root.$(suggestion_elem).children('.suggested_content_info').children('.desc').html(response.title);\n\n                            setTimeout(function(){\n                                root.hidePopup();\n                                Backbone.history.loadUrl(Backbone.history.fragment);\n                            }, 2000);\n                        }, error: function(response){\n                            root.actionFailed();\n                            setTimeout(function(){\n                                root.hidePopup();\n                            }, 2000);\n                        }\n                    }\n                )\n            }, 1000);\n\n        },\n\n        saveLinkSuggestions: function(checklistItemId){\n            var checklistItem = new ChecklistItem();\n\n            var suggestionType = this.$('.suggetsion_type input:checked').attr('id')\n\n            var root = this;\n            var attrs = {'id': checklistItemId};\n            attrs['suggestions'] = {}\n\n            var hasSuggestions = $('.suggestion_group').length || $('.pf-suggestion-demo').length;\n\n            if (!hasSuggestions){\n                attrs['suggestions']['message'] = {'title': this.$('.pf-suggestion h2').text(), 'body': this.$('.pf-suggestion p').text()}\n            }\n\n            var externalLinks = [];\n\n            if (suggestionType == 'link_external'){\n                var totalExternalLinkEles = this.$('.url_unfurling_block');\n                _.each(totalExternalLinkEles, function(element, index) {\n                    externalLinks.push(totalExternalLinkEles.eq(index).data('response'))\n                });\n\n                if (!externalLinks.length) return;\n                this.actionInProgress('add_suggestions');\n                attrs['suggestions']['external_links'] = externalLinks\n            }\n\n            attrs['suggestions']['chapters'] = this._chapters;\n\n            if((this._chapters.length > 0) || externalLinks.length != 0) {\n\n                checklistItem.save(attrs, {\n                    patch: true,\n                    success: function (model, response) {\n                        root.actionSuccess();\n                        root.listSuggestions(response);\n                    }\n                })\n            }\n            this.clearChapterCache();\n        },\n\n        goBack: function(event){\n\n            var checklistItemId = this.$('.save').attr('data-id');\n            if((parseInt(checklistItemId))){\n                this.$(event.currentTarget).attr('data-popup', 'checklist_item');\n                this.$(event.currentTarget).attr('data-id', checklistItemId);\n                this.editEntity(event);\n            } else {\n                this.$(event.currentTarget).attr('data-popup', 'checklist_item');\n                this.editEntity(event);\n                this.$('.popup-box [name=title]').val(this.item_name);\n                var checklist_item_title_char_count = root.ITEM_TITLE_LIMIT - this.item_name.length;\n                this.$('#checklist_item_title_counter').html(checklist_item_title_char_count + ' Characters Left');\n\n                this.$('.popup-box [name=description]').val(this.item_description);\n                var checklist_item_desc_char_count = root.ITEM_DESCRIPTION_LIMIT - this.item_description.length;\n                this.$('#checklist_desc_counter').html(checklist_item_desc_char_count + ' Characters Left');\n            }\n        },\n\n        saveSuggestionsNewItem: function (event) {\n            var root = this;\n            root.actionInProgress();\n\n            setTimeout(function () {\n                root.$(event.currentTarget).attr('data-popup', 'checklist_item');\n                root.cacheChapterSuggestions(event);\n                root.showPopupAttrs(event);\n\n                root.$('.popup-box [name=title]').val(root.item_name);\n                var item_title_limit = root.ITEM_TITLE_LIMIT - root.item_name.length;\n                root.$('#checklist_item_title_counter').html(item_title_limit + \" \" + Translate(\"characters left\"));\n\n                root.$('.popup-box [name=description]').val(root.item_description);\n                var item_description_limit = root.ITEM_DESCRIPTION_LIMIT - root.item_description.length;\n                root.$('#checklist_desc_counter').html(item_description_limit + \" \" + Translate(\"characters left\"));\n\n                if(root._chapters.length){\n                    root.$('.popup-box .selected_chapters').html(root._chapters.length + \" \" + Translate(\"chapter selected\"));\n                } else {\n                    root.$('.popup-box .selected_chapters').html('');\n                }\n            }, 2000);\n        },\n\n        saveSuggestions: function(event){\n            var checklistItemId = this.$(event.target).attr('data-id');\n\n            if(!(parseInt(checklistItemId))){\n                this.saveSuggestionsNewItem(event);\n                return;\n            }\n\n            var checklistItem = new ChecklistItem();\n\n            var suggestionType = this.$('.suggetsion_type input:checked').attr('id')\n\n            var root = this;\n            var attrs = {'id': checklistItemId};\n            attrs['suggestions'] = {};\n\n            var hasSuggestions = $('.suggestion_group').length || $('.pf-suggestion-demo').length;\n\n            if (!hasSuggestions){\n                attrs['suggestions']['message'] = {'title': this.$('.pf-suggestion h2').text(), 'body': this.$('.pf-suggestion p').text()}\n            }\n\n            if (suggestionType == 'link_external'){\n                var externalLinks = []\n                var totalExternalLinkEles = this.$('.url_unfurling_block');\n                _.each(totalExternalLinkEles, function(element, index) {\n                    externalLinks.push(totalExternalLinkEles.eq(index).data('response'))\n                });\n\n                if (!externalLinks.length) return;\n                this.actionInProgress('add_suggestions');\n                attrs['suggestions']['external_links'] = externalLinks\n            }else{\n                var selectedChapters = this.$('.css-checkbox:checked');\n                var _chapters = _.map(selectedChapters, function(elem){return elem.value;});\n\n                if(!selectedChapters.length) return;\n                this.actionInProgress('add_suggestions');\n                attrs['suggestions']['chapters'] = _chapters\n            }\n\n            checklistItem.save(attrs,{\n                patch: true,\n                success: function(model, response){\n                    root.actionSuccess();\n\n                    root.listSuggestions(response);\n\n                    setTimeout(function(){\n                        root.hidePopup();\n                        Backbone.history.loadUrl(Backbone.history.fragment);\n                    }, 2000);\n                }, \n                error: function(xhr, status_code, error_message){\n                    root.actionFailed('add_suggestions');\n                }\n            })\n        },\n\n        showAdvanced: function(event){\n            this.$(event.currentTarget).parents('.popup-box').toggleClass('advanced-show');\n            setTimeout(function(){\n                this.$('.popup-box .content-block').animate({scrollTop :750},'slow');\n            }, 100);\n        },\n\n        showPopupAttrs: function(event){\n            event.preventDefault();\n            if(typeof this.$(event.currentTarget).attr('class')!= \"undefined\") {\n                var target_class = this.$(event.currentTarget).attr('class').split(' ').reverse()[0];\n                if (target_class != 'delete' && target_class != 'edit' && target_class != 'publish-checklist') {\n                    if (!Common.isDefaultLocale(this)) {\n                        this.overlayCalc();\n                        return;\n                    }\n                }\n            }\n            var popupName = this.$(event.currentTarget).attr('data-popup');\n            var popupType = this.$(event.currentTarget).attr('data-type');\n            var attrs ={};\n            attrs[popupName] = true;\n            attrs['entity_type'] = popupType;\n\n            var checklist_slug = this.$(event.currentTarget).parents('li').attr('data-checklist-slug');\n            if(checklist_slug !== undefined){\n                attrs['checklist_slug'] = checklist_slug;\n            }\n\n            var checklist_section_id = this.$(event.currentTarget).parents('.checklist_section').attr('data-id') || this.section_id;\n            if(checklist_section_id !== undefined){\n                attrs['section_id'] = checklist_section_id;\n            }\n\n            var checklist_item_id = this.$(event.currentTarget).parents('.checklist_item').attr('data-id');\n            if(checklist_item_id !== undefined){\n                attrs['item_id'] = checklist_item_id;\n            }\n\n            var checklist_suggestion_id = this.$(event.currentTarget).parents('.suggested_content_wrap').attr('data-id');\n            if(checklist_suggestion_id !== undefined){\n                attrs['suggestion_id'] = checklist_suggestion_id;\n            }\n\n            if(popupName == 'checklist_section'){\n                var is_edit = this.$(event.currentTarget).hasClass('edit');\n                if(is_edit){\n                    attrs.index = this.$(event.takrget).parents('.steps_title').children('.index').html();\n                }else{\n                    attrs.index = this.$('.checklist_section').length + 1;\n                }\n            }\n\n            if(this.$(event.currentTarget).hasClass('edit')){\n                attrs.is_edit = true;\n            }\n\n            if(this.$(event.currentTarget).hasClass('delete')){\n                attrs.entity_type = popupType.replace('-', ' ');\n            }\n\n            if(popupName == 'checklist_suggestion'){\n                this.$('.footer .save').text('SAVE').removeClass('suggestions_selected');\n            }\n\n            var data_id = $(event.target).attr('data-id');\n            if(data_id){\n                attrs['item_id'] = data_id;\n            }\n\n            this.showPopup(attrs);\n        },\n\n        showPopup: function(attrs){\n            this.$('.popup-overlay .popup-wrap').html(PopupTemplate(attrs));\n            this.$('.popup-overlay').addClass('active');\n            this.overlayCalc();\n        },\n\n        submitChecklist: function(event){\n            var checklistTitle = this.$('input[name=\"title\"]');\n            var checklistDescription = this.$('textarea[name=\"description\"]');\n            var iconFile = this.$('.popup-box :file')[0].files[0];\n\n            var errorFlag = false;\n            if (!checklistTitle.val()) {\n                this.customErrorMessage('Provide a title for the checklist', this.$(checklistTitle).parent(), this.$(checklistTitle));\n                errorFlag = true;\n            }\n\n            if (errorFlag) return false;\n\n            this.removeErrorMessages();\n\n            var iconFile = this.$('input[name=\"upload-file\"]').val() ? this.$('.popup-box :file')[0].files[0] : null;\n\n            var checklistData = new FormData();\n            checklistData.append('title', checklistTitle.val());\n            checklistData.append('description', checklistDescription.val());\n            checklistData.append('icon', iconFile);\n            if(this.$('#featured .option-check.active').html() == 'yes'){\n                checklistData.append('is_featured', true);\n            }\n            checklistData.append('csrf_token', $('meta[name=csrf-token]').attr('content'));\n\n            this.actionInProgress();\n\n            var editChecklist = this.$('.popup-box').attr('edit_checklist');\n            if(editChecklist){\n                var removeIcon = this.$('.img-preview').attr('data-remove');\n                var checklistSlug = this.$(event.currentTarget).attr('data-id');\n                if(removeIcon){\n                    checklistData.append('remove_icon', removeIcon);\n                }\n                var checklist = new Checklist({'id' : checklistSlug});\n                this.saveChecklist(checklistData, checklist, editChecklist);\n            }else{\n                var checklist = new Checklist();\n                this.saveChecklist(checklistData, checklist, editChecklist);\n            }\n        },\n\n        submitChecklistSection: function(event){\n            var checklistSectionTitle = this.$('input[name=\"name\"]');\n            var checklistSlug = this.$('.checklist_header').attr('data-id');\n\n            var errorFlag = false;\n            if (!checklistSectionTitle.val()) {\n                this.customErrorMessage('Provide a title for the checklist section', this.$(checklistSectionTitle).parent(), this.$(checklistSectionTitle));\n                errorFlag = true;\n            }\n\n            if (errorFlag) return false;\n\n            this.removeErrorMessages();\n\n            var checklistSectionData = {\n                'title' : checklistSectionTitle.val(),\n                'checklist_slug' : checklistSlug\n            }\n\n            this.actionInProgress();\n\n            var editChecklistSection = this.$('.popup-box').attr('edit_checklist_section');\n            if(editChecklistSection){\n                var checklistSectionId = this.$(event.currentTarget).attr('data-id');\n                checklistSectionData['id'] = checklistSectionId\n                var checklistSection = new ChecklistSection(checklistSectionData);\n                this.saveChecklistSection(checklistSection, editChecklistSection);\n            }else{\n                var checklistSection = new ChecklistSection(checklistSectionData);\n                this.saveChecklistSection(checklistSection, editChecklistSection);\n            }\n        },\n\n        submitChecklistItem: function(event){\n            var checklistItemTitle = this.$('input[name=\"title\"]');\n            var checklistItemDescription = this.$('textarea[name=\"description\"]');\n            var checklistSectionId = this.$(event.target).attr('section-id');\n\n            var errorFlag = false;\n            if (!checklistItemTitle.val()) {\n                this.customErrorMessage('Provide a title for the checklist item', this.$(checklistItemTitle).parent(), this.$(checklistItemTitle));\n                errorFlag = true;\n            }\n            if (errorFlag) return false;\n\n            this.removeErrorMessages();\n\n            var checklistItemData = {\n                'title': checklistItemTitle.val(),\n                'description': checklistItemDescription.val(),\n                'checklist_section_id': checklistSectionId\n            }\n\n            this.actionInProgress();\n\n            var editChecklistItem = this.$('.popup-box').attr('edit_checklist_item');\n            if(editChecklistItem){\n                var checklistItemId = this.$(event.currentTarget).attr('data-id');\n                checklistItemData['id'] = checklistItemId;\n                var checklistItem = new ChecklistItem(checklistItemData);\n                this.saveLinkSuggestions(checklistItemId);\n                this.saveChecklistItem(checklistItem, editChecklistItem, checklistSectionId);\n            }else{\n                var checklistItem = new ChecklistItem(checklistItemData);\n                this.saveChecklistItem(checklistItem, editChecklistItem, checklistSectionId);\n            }\n        },\n\n        switchOption: function(event){\n            this.$(event.currentTarget).parent().find('.option-check').removeClass('active');\n            this.$(event.currentTarget).addClass('active');\n        },\n\n        switchSuggestionType: function(event){\n            this.$('.content_suggestion').addClass('disabled')\n            this.$(event.currentTarget).siblings('.content_suggestion').removeClass('disabled');\n            var suggestionType = this.$(event.currentTarget).attr('id');\n            if(suggestionType == 'link_external'){\n                $('.suggestion_link').attr('disabled', false);\n            }else{\n                $('.suggestion_link').attr('disabled', true);\n            }\n            $('.suggestion_link').removeClass('error');\n        },\n\n        toggleTreeContent: function(event){\n            if(!this.$(event.currentTarget).hasClass('category') || this.$(event.currentTarget).hasClass('demo')) return;\n\n            if (this.$(event.currentTarget).hasClass('closed')) {\n                this.$(event.currentTarget).siblings().show();\n                this.$(event.currentTarget).removeClass('closed').addClass('open');\n            }else{\n                this.$(event.currentTarget).siblings().hide();\n                this.$(event.currentTarget).removeClass('open').addClass('closed');\n            }\n        },\n\n        updateAddButtonText: function(){\n            var suggestionsCount = this.$('.css-checkbox:checked').length;\n            if (suggestionsCount>0) {\n                this.$('.footer .save').text('ADD ' + suggestionsCount + \" SUGGESTED CHAPTER\").addClass('suggestions_selected');\n            } else {\n                this.$('.footer .save').text('SAVE').removeClass('suggestions_selected');\n            }\n        },\n\n        updateAddStepText: function () {\n            var steps = this.$('.checklist_step_wrap .checklist_section').length + 1;\n            $(\".add-block[data-popup='checklist_section'] h3\").text('add step ' + steps.toString());\n        }\n\n    });\n\n    return EditView;\n});\n"],"sourceRoot":""}